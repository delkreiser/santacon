<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <title>Boulder SantaCon 2024</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        body.dark-mode {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        body.dark-mode .glass-effect {
            background: rgba(40, 40, 40, 0.95);
            color: #e0e0e0;
        }
        body.dark-mode .gradient-bg {
            background: linear-gradient(135deg, #0d3d21 0%, #7a1a1c 100%);
        }
        body.dark-mode .text-gray-800 {
            color: #e0e0e0 !important;
        }
        body.dark-mode .text-gray-700 {
            color: #b0b0b0 !important;
        }
        body.dark-mode .text-gray-600 {
            color: #909090 !important;
        }
        body.dark-mode .bg-white {
            background-color: #2a2a2a !important;
        }
        body.dark-mode .bg-gray-50 {
            background-color: #1f1f1f !important;
        }
        body.dark-mode .border-gray-200 {
            border-color: #404040 !important;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #165B33 0%, #BB2528 100%);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            transform: translateY(-2px);
        }
        .nav-button.active {
            background: #BB2528;
            color: white;
        }
        .carol-lyrics {
            font-size: 1.1rem;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        @media (max-width: 640px) {
            .carol-lyrics {
                font-size: 1rem;
                line-height: 1.6;
            }
        }
        .snowflake {
            position: fixed;
            top: -10px;
            z-index: 9999;
            user-select: none;
            cursor: default;
            animation: snowfall linear infinite;
            color: white;
            opacity: 0.8;
        }
        @keyframes snowfall {
            0% {
                transform: translateY(0vh) rotate(0deg);
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }
        body.dark-mode .modal-content {
            background: #2a2a2a;
        }
        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Snowflake component for festive effect
        const Snowflakes = () => {
            const snowflakes = Array.from({ length: 20 }, (_, i) => ({
                id: i,
                left: Math.random() * 100,
                animationDuration: 10 + Math.random() * 20,
                fontSize: 10 + Math.random() * 20,
                delay: Math.random() * 10
            }));

            return (
                <>
                    {snowflakes.map(flake => (
                        <div
                            key={flake.id}
                            className="snowflake"
                            style={{
                                left: `${flake.left}%`,
                                animationDuration: `${flake.animationDuration}s`,
                                fontSize: `${flake.fontSize}px`,
                                animationDelay: `${flake.delay}s`
                            }}
                        >
                            ‚ùÑ
                        </div>
                    ))}
                </>
            );
        };

        // Schedule data with detailed info
        const scheduleData = [
            { 
                time: "5:00 - 6:30pm", 
                venue: "Avanti F&B (roof top lounge)",
                mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1964.7278793680014!2d-105.27691744636638!3d40.0178103639815!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bed2929560fbd%3A0xbe3c1820b8797eee!2sAvanti%20Food%20and%20Beverage%20Boulder!5e1!3m2!1sen!2sus!4v1762220992124!5m2!1sen!2sus",
                mapLink: "https://maps.app.goo.gl/uXvk9P3sDBJoXFJVA",
                notes: "When Santa is ready to leave, exit using the stairwell. We will gather the Santas and then make our way to the Mural alley for our Santa line up!"
            },
            { 
                time: "6:30 - 7:00pm", 
                venue: "Pearl Street Caroling and Group Photo",
                mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1118.6936876331285!2d-105.2780970909969!3d40.01849507885064!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bed6384ffa061%3A0x12051a85a97cca48!2sBoulder%20County%20Historic%20Court%20House!5e1!3m2!1sen!2sus!4v1762221010590!5m2!1sen!2sus",
                mapLink: "https://maps.app.goo.gl/2EEgyuTTbZWFPHFS6",
                notes: "Santa will gather in front of the Court House on Pearl Street for our group photo and a few carols. We'll then walk down the Mall to the area by Boulder Books for another round of carols."
            },
            { 
                time: "7:00 - 8:15pm", 
                venue: "St. Julien Hotel",
                mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7591.427428751109!2d-105.28521968514423!3d40.01584274961552!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bec26a391b9e9%3A0x86495a6b403f6317!2sSt%20Julien%20Hotel%20%26%20Spa!5e1!3m2!1sen!2sus!4v1762221047809!5m2!1sen!2sus",
                mapLink: "https://maps.app.goo.gl/wQpMRekk78dy9B778",
                notes: null
            },
            { 
                time: "8:15 - 9:00pm", 
                venue: "Choose your own Adventure! (The Velvet Elk / License No.1 / Boulderado)",
                mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d474.4393082879971!2d-105.27947094109244!3d40.01942494891759!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bec27c75baec1%3A0x7c8592e2ed4b2ee8!2sLicense%20No.%201!5e1!3m2!1sen!2sus!4v1762221090080!5m2!1sen!2sus",
                mapLink: null,
                notes: "We're going to head back down Pearl to go to either the Velvet Elk or License No. 1. Take your pick! If you go to License No.1, get there early before the crowds to get a drink. You can also go upstairs and get a drink at the Corner Bar."
            },
            { 
                time: "9:00 - 1:00am", 
                venue: "The Santa Ball @ The Riverside", 
                isAfterParty: true,
                mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d474.47377773047225!2d-105.27881746029514!3d40.014467182362914!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bec258e8bfb7f%3A0xbf27b5a8462b87a6!2sThe%20Riverside%20Private%20%26%20Public%20Event%20Venue!5e1!3m2!1sen!2sus!4v1762220959898!5m2!1sen!2sus",
                mapLink: "https://maps.app.goo.gl/M6BUwhF2ZvT6ZQ9A8",
                notes: "This is our final stop! There is a cover charge for the event."
            }
        ];

        // Venue Quests data
        const venueQuestsData = [
            {
                name: "Hotel Boulderado",
                description: "Have a drink at this historic hotel",
                unlockTime: 17 * 60, // 5:00pm in minutes
                mapLink: "https://maps.app.goo.gl/example1"
            },
            {
                name: "The Velvet Elk",
                description: "Quick cocktail break",
                unlockTime: 17 * 60, // 5:00pm
                mapLink: "https://maps.app.goo.gl/example2"
            },
            {
                name: "Pizza Calore",
                description: "Grab a slice",
                unlockTime: 17 * 60, // 5:00pm
                mapLink: "https://maps.app.goo.gl/example3"
            },
            {
                name: "T|Aco",
                description: "Taco time with Santas",
                unlockTime: 19 * 60, // 7:00pm
                mapLink: "https://maps.app.goo.gl/example4"
            },
            {
                name: "Jungle",
                description: "Jungle juice break",
                unlockTime: 19 * 60, // 7:00pm
                mapLink: "https://maps.app.goo.gl/example5"
            }
        ];

        // Badge definitions
        const badgeDefinitions = [
            {
                id: 'jolly-leader',
                emoji: 'üéÖ',
                name: 'Jolly Leader',
                description: 'Lead a carol sing-along in public',
                buttonText: 'High Five! üôå'
            },
            {
                id: 'gift-giver',
                emoji: 'üéÅ',
                name: 'Gift Giver',
                description: 'Buy a fellow Santa some holiday cheer',
                buttonText: 'Cheers! üçª'
            },
            {
                id: 'paparazzi',
                emoji: 'üì∏',
                name: 'Paparazzi',
                description: 'Snap photos at 3+ locations',
                buttonText: 'Noice! üòé'
            },
            {
                id: 'marathon-santa',
                emoji: 'üèÉ',
                name: 'Marathon Santa',
                description: 'Complete all 4 official stops',
                buttonText: "You're #1! ü•á"
            },
            {
                id: 'super-santa',
                emoji: 'üåü',
                name: 'Super Santa',
                description: 'Crush 3+ side quests',
                buttonText: 'Flex! üí™'
            },
            {
                id: 'boulder-legend',
                emoji: 'üé≠',
                name: 'Boulder Legend',
                description: 'Veteran of 3+ SantaCons',
                buttonText: 'Respect! ü´°'
            }
        ];

        // Memoized ScheduleStop component
        const ScheduleStop = React.memo(({ stop, index, expandedStop, setExpandedStop, setActiveTab, isCurrentStop }) => (
            <div 
                className={`rounded-lg border-2 overflow-hidden relative ${
                    isCurrentStop ? 'border-4 border-yellow-400 shadow-2xl' : 
                    stop.isAfterParty ? 'border-red-500' : 'border-gray-200'
                }`}
            >
                {isCurrentStop && (
                    <div className="absolute top-2 right-2 z-10">
                        <div className="bg-red-600 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center animate-bounce">
                            <i className="fas fa-map-marker-alt mr-1"></i>
                            Santa is Here!
                        </div>
                    </div>
                )}
                <button
                    onClick={() => setExpandedStop(expandedStop === index ? null : index)}
                    className={`w-full p-4 text-left transition-colors ${
                        isCurrentStop ? 'bg-gradient-to-r from-yellow-100 via-yellow-200 to-yellow-100' :
                        stop.isAfterParty 
                            ? 'bg-gradient-to-r from-red-100 to-green-100' 
                            : 'bg-white hover:bg-gray-50'
                    }`}
                >
                    <div className="flex justify-between items-center">
                        <div className="flex-1">
                            <div className={`font-bold text-lg ${isCurrentStop ? 'text-red-700' : 'text-gray-800'}`}>
                                {stop.time}
                            </div>
                            <div className={`${
                                isCurrentStop ? 'text-red-600 font-semibold' :
                                stop.isAfterParty ? 'text-red-700 font-semibold' : 'text-gray-600'
                            } mt-1`}>
                                {stop.venue}
                            </div>
                        </div>
                        <i className={`fas fa-chevron-${expandedStop === index ? 'up' : 'down'} text-gray-400 ml-2`}></i>
                    </div>
                </button>
                
                {expandedStop === index && (
                    <div className="p-4 bg-gray-50 border-t-2 border-gray-200">
                        {stop.notes && (
                            <div className="bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4">
                                <p className="text-sm text-gray-700">{stop.notes}</p>
                            </div>
                        )}
                        {stop.mapEmbed && (
                            <div className="mb-4 rounded-lg overflow-hidden" style={{ height: '300px' }}>
                                <iframe
                                    src={stop.mapEmbed}
                                    width="100%"
                                    height="100%"
                                    style={{ border: 0 }}
                                    allowFullScreen=""
                                    loading="lazy"
                                    referrerPolicy="no-referrer-when-downgrade"
                                ></iframe>
                            </div>
                        )}
                        {stop.isAfterParty && (
                            <button
                                onClick={() => setActiveTab('afterparty')}
                                className="w-full bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700 transition"
                            >
                                <i className="fas fa-ticket-alt mr-2"></i>
                                View Party Details
                            </button>
                        )}
                    </div>
                )}
            </div>
        ));

        // Carol data
        const carolsData = {
            nice: [
                {
                    title: "Frosty the Snowman",
                    lyrics: `Frosty the snowman was a jolly happy soul 
With a corncob pipe and a button nose and 
two eyes made out of coal 

Frosty the snowman is a fairy tale they say 
He was made of snow but the children know 
how he came to life one day 

There must have been some magic in that old 
silk hat they found For when they placed it on 
his head he began to dance around 

Frosty the snowman was alive as he could be
And the children say he could laugh and play 
just the same as you and me 

Thumpetty thump thump thumpety thump thump 
Look at Frosty go 
Thumpetty thump thump thumpety thump thump 
Over the hills of snow 

Frosty the snowman knew the sun was hot that day 
So he said "Let's run and we'll have some fun now 
before I melt away" 

Down to the village with a broomstick in his hand 
Running here and there all around the square saying 
Catch me if you can 

He led them down the streets of town right to the traffic cop 
And he only paused a moment when he heard him holler "Stop!" 
For Frosty the snow man had to hurry on his way 
But he waved goodbye saying "Don't you cry"
I'll be back again some day`
                },
                {
                    title: "Jingle Bells",
                    lyrics: `Dashing through the snow 
In a one horse open sleigh 
O'er the fields we go 
Laughing all the way. (ho, ho, ho!) 
Bells on bob tails ring 
Making spirits bright 
What fun it is to laugh and sing A sleighing song tonight 

Oh, jingle bells, jingle bells 
Jingle all the way 
Oh, what fun it is to ride 
In a one horse open sleigh 

Jingle Bells, Batman smells Robin laid an egg. 
The Batmobile lost a wheel and the Joker got away (Hey!) 

Jingle bells, shotgun shells, 
Santa Claus is dead, Rudolf got a .22 and shot him in the head. (Hey!) 

Oh, jingle bells, jingle bells 
Jingle all the way 
Oh, what fun it is to ride In a one.... horse.... open.... SLEIGHHHHH!!!!!!!`
                },
                {
                    title: "Rudolph the Red-nosed Reindeer",
                    lyrics: `You know Dasher and Dancer and Prancer and Vixen, 
Comet and Cupid and Donner and Blitzen., 
But do you recall? The most famous reindeer of all! 

Rudolph the Red-Nosed Reindeer (reindeer) 
Had a very shiny nose, (shiny nose) 
And if you ever saw it, (saw it) 
You would even say it glows (like a light bulb!), 

All of the other reindeer (reindeer) 
Used to laugh and call him names (like pinnochio) , 
They never let poor Rudolph (rudolph) 
Join in any reindeer games, (like monopoly) 

Then one foggy Christmas Eve, 
Santa came to say, ho ho ho, 
Rudolph with your nose so bright, 
Won't you guide my sleigh tonight? (tonight) 

Then how the reindeer loved him (loved him) 
As they shouted out with glee, yippee, 
Rudolph the Red-Nosed Reindeer, (reindeer) You'll go down in history!`
                },
                {
                    title: "Feliz Navidad",
                    lyrics: `Feliz Navidad 
Feliz Navidad 
Feliz Navidad 
Prospero A√±o y Felicidad. 

I wanna wish you a Merry Christmas 
I wanna wish you a Merry Christmas 
I wanna wish you a Merry Christmas 
From the bottom of my heart.`
                },
                {
                    title: "Have a Holly Jolly Christmas",
                    lyrics: `Have a holly, jolly Christmas 
It's the best time of the year 
I don't know if there'll be snow but have a cup of cheer 

Have a holly, jolly Christmas 
And when you walk down the street 
Say Hello to friends you know and everyone you meet 

Oh ho, the mistletoe hung where you can see 
Somebody waits for you 
Kiss her once for me 

Have a holly jolly Christmas 
and in case you didn't hear 
Oh by golly have a holly jolly Christmas this year`
                }
            ],
            naughty: [
                {
                    title: "Walkin' Round in Women's Underwear",
                    lyrics: `Lacy things -- the wife is missin', 
Didn't ask -- her permission,
I'm wearin' her clothes, Her silk pantyhose, 
Walkin' 'round in women's underwear. 

In the store -- there's a teddy, 
Little straps -- like spaghetti, 
It holds me so tight, Like handcuffs at night, 
Walkin' 'round in women's underwear. 

In the office there's a guy named Melvin, 
He pretends that I am Murphy Brown. 
He'll say, "Are you ready?" 
I'll say, "Whoa, Man!" "Let's wait until our wives are out of town!"

Later on, if you wanna,
We can dress -- like Madonna, 
Put on some eyeshade, And join the parade, 
Walkin' 'round in women's underwear!

Lacy things... missin', 
Didn't ask... permission, 
Wearin' her clothes, Her silk pantyhose, 
Walkin' 'round in women's underwear, 
Walkin' 'round in women's underwear, 
Walkin' 'round in women's underwear!`
                },
                {
                    title: "Let it Flow",
                    lyrics: `(tune of "Let It Snow")

The weather outside is frightful, 
but the beer inside's delightful. 
And since we've no place to go,
Let it Flow, Let it Flow, Let it Flow! 

Oh we show no signs of stopping, 
and now we're really hopping. 
And the lights are turned way down low.
Let it Flow, Let it Flow, Let it Flow!! 

When we finally drink it dry, 
how we hate going back to the store. 
Maybe we'll just get high, 
and all fall asleep on the floor!! 

Oh the party is slowly dying. 
And our friends have all stopped buying. 
Now my bladder really wants to know. 
Where to go, Where to go, Where to go???`
                },
                {
                    title: "The 12 Drugs of Christmas",
                    lyrics: `On the first day of Christmas, my dealer gave to me: 
A Tab of Yellow Sunshine LSD 

2 Hundred Reds 
3 Pounds of Grass 
4 Grams of Hash 
5 Valiums 
6 Joints of Smoking 
7 Whites a-Buzzing 
8 Spoons of Snorting 
9 Caps of dropping 
10 Peyote Buttons 
11 Magic Mushrooms 
12 Pints a-dripping`
                }
            ]
        };

        function App() {
            const [activeTab, setActiveTab] = useState('home');
            const [carolType, setCarolType] = useState('nice');
            const [selectedCarol, setSelectedCarol] = useState(null);
            const [subscribeStatus, setSubscribeStatus] = useState('');
            const [lyricsFontSize, setLyricsFontSize] = useState(1.1);
            const [darkMode, setDarkMode] = useState(false);
            const [expandedStop, setExpandedStop] = useState(null);
            const [currentStop, setCurrentStop] = useState(null);
            const [expandedAbout, setExpandedAbout] = useState(null);
            
            // Quests state
            const [expandedBadges, setExpandedBadges] = useState(false);
            const [completedVenues, setCompletedVenues] = useState([]);
            const [completedChallenges, setCompletedChallenges] = useState([]);
            const [earnedBadges, setEarnedBadges] = useState([]);
            const [showBadgeModal, setShowBadgeModal] = useState(null);
            const [showMajorAward, setShowMajorAward] = useState(false);
            const [showAllBadgesModal, setShowAllBadgesModal] = useState(false);

            // Function to get current stop based on time - TESTING DATE SET TO 11/12/25
            const getCurrentStop = () => {
                const now = new Date();
                
                // TESTING: Check if it's November 12, 2025
                const year = now.getFullYear();
                const month = now.getMonth(); // 0-11 (November is 10)
                const day = now.getDate();
                
                // Only activate on November 12, 2025 (for testing)
                if (year !== 2025 || month !== 10 || day !== 12) {
                    return null;
                }

                const currentHour = now.getHours();
                const currentMinute = now.getMinutes();
                const currentTime = currentHour * 60 + currentMinute;

                const stops = [
                    { index: 0, start: 17 * 60, end: 18 * 60 + 30 }, // 5:00pm - 6:30pm
                    { index: 1, start: 18 * 60 + 30, end: 19 * 60 }, // 6:30pm - 7:00pm
                    { index: 2, start: 19 * 60, end: 20 * 60 + 15 }, // 7:00pm - 8:15pm
                    { index: 3, start: 20 * 60 + 15, end: 21 * 60 }, // 8:15pm - 9:00pm
                    { index: 4, start: 21 * 60, end: 25 * 60 } // 9:00pm - 1:00am
                ];

                for (let stop of stops) {
                    if (currentTime >= stop.start && currentTime < stop.end) {
                        return stop.index;
                    }
                }

                return null;
            };

            // Get unlocked venue quests based on current time
            const getUnlockedVenues = () => {
                const now = new Date();
                const year = now.getFullYear();
                const month = now.getMonth();
                const day = now.getDate();
                
                // Only work on November 12, 2025 (testing date)
                if (year !== 2025 || month !== 10 || day !== 12) {
                    return [];
                }

                const currentTime = now.getHours() * 60 + now.getMinutes();
                return venueQuestsData.filter(venue => currentTime >= venue.unlockTime);
            };

            // Check for Marathon Santa badge auto-unlock at 8:15pm
            useEffect(() => {
                const now = new Date();
                const year = now.getFullYear();
                const month = now.getMonth();
                const day = now.getDate();
                
                if (year === 2025 && month === 10 && day === 12) {
                    const currentTime = now.getHours() * 60 + now.getMinutes();
                    const marathonUnlockTime = 20 * 60 + 15; // 8:15pm
                    
                    if (currentTime >= marathonUnlockTime && !earnedBadges.includes('marathon-santa')) {
                        setEarnedBadges(prev => [...prev, 'marathon-santa']);
                        setShowBadgeModal('marathon-santa');
                    }
                }
            }, [earnedBadges]);

            // Check for badge unlocks based on completed quests
            useEffect(() => {
                // Super Santa: 3+ venue quests
                if (completedVenues.length >= 3 && !earnedBadges.includes('super-santa')) {
                    setEarnedBadges(prev => [...prev, 'super-santa']);
                    setShowBadgeModal('super-santa');
                }

                // Paparazzi: marked as complete in challenges
                const photoChallenge = completedChallenges.find(c => c.includes('photo'));
                if (photoChallenge && !earnedBadges.includes('paparazzi')) {
                    setEarnedBadges(prev => [...prev, 'paparazzi']);
                    setShowBadgeModal('paparazzi');
                }

                // Gift Giver: marked as complete in challenges
                const drinkChallenge = completedChallenges.find(c => c.includes('drink'));
                if (drinkChallenge && !earnedBadges.includes('gift-giver')) {
                    setEarnedBadges(prev => [...prev, 'gift-giver']);
                    setShowBadgeModal('gift-giver');
                }

                // Jolly Leader: marked as complete in challenges
                const carolChallenge = completedChallenges.find(c => c.includes('carol'));
                if (carolChallenge && !earnedBadges.includes('jolly-leader')) {
                    setEarnedBadges(prev => [...prev, 'jolly-leader']);
                    setShowBadgeModal('jolly-leader');
                }

                // Boulder Legend: self-reported
                const legendChallenge = completedChallenges.find(c => c.includes('3rd+'));
                if (legendChallenge && !earnedBadges.includes('boulder-legend')) {
                    setEarnedBadges(prev => [...prev, 'boulder-legend']);
                    setShowBadgeModal('boulder-legend');
                }

                // Check for all badges complete
                if (earnedBadges.length === 6 && !showAllBadgesModal) {
                    setShowAllBadgesModal(true);
                }
            }, [completedVenues, completedChallenges, earnedBadges, showAllBadgesModal]);

            // Update current stop every minute
            useEffect(() => {
                setCurrentStop(getCurrentStop());
                const interval = setInterval(() => {
                    setCurrentStop(getCurrentStop());
                }, 60000);

                return () => clearInterval(interval);
            }, []);

            // Scroll to top when switching tabs
            useEffect(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, [activeTab]);

            const handleSubscribe = async (e) => {
                e.preventDefault();
                setSubscribeStatus('Subscribing...');
                
                const emailInput = e.target.elements.email.value;

                try {
                    const formData = new FormData();
                    formData.append('EMAIL', emailInput);
                    formData.append('b_2562f63497', '');

                    const response = await fetch(
                        'https://us7.list-manage.com/subscribe/post?u=97c79a453122b17d97b904bea&id=2562f63497',
                        {
                            method: 'POST',
                            body: formData,
                            mode: 'no-cors'
                        }
                    );

                    setSubscribeStatus('Thanks for subscribing! üéÖ');
                    e.target.reset();
                    setTimeout(() => setSubscribeStatus(''), 3000);
                } catch (error) {
                    setSubscribeStatus('Oops! Please try again.');
                    setTimeout(() => setSubscribeStatus(''), 3000);
                }
            };

            const HomePage = () => (
                <div className="space-y-6">
                    <div className="text-center mb-8">
                        <div className="w-32 h-32 mx-auto mb-4 bg-white rounded-full flex items-center justify-center shadow-lg">
                            <span className="text-6xl">üéÖ</span>
                        </div>
                        <h1 className="text-4xl font-bold text-red-700 mb-2">Boulder SantaCon</h1>
                        <p className="text-xl text-green-700 font-semibold">19th Annual Event</p>
                        <p className="text-lg text-gray-700 mt-2">Black Friday 2024</p>
                        
                        <div className="flex justify-center gap-4 mt-4">
                            <a 
                                href="https://www.instagram.com/bouldersantacon" 
                                target="_blank" 
                                rel="noopener noreferrer"
                                className="bg-gradient-to-br from-purple-500 to-pink-500 text-white w-12 h-12 rounded-full flex items-center justify-center hover:scale-110 transition-transform shadow-lg"
                            >
                                <i className="fab fa-instagram text-xl"></i>
                            </a>
                            <a 
                                href="https://www.facebook.com/events/1458481705240919" 
                                target="_blank" 
                                rel="noopener noreferrer"
                                className="bg-blue-600 text-white w-12 h-12 rounded-full flex items-center justify-center hover:scale-110 transition-transform shadow-lg"
                            >
                                <i className="fab fa-facebook-f text-xl"></i>
                            </a>
                        </div>
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl p-6">
                        <h2 className="text-2xl font-bold text-red-700 mb-4 flex items-center">
                            <i className="fas fa-calendar-alt mr-3"></i>
                            Santa's Schedule
                        </h2>
                        <div className="space-y-3">
                            {scheduleData.map((stop, index) => (
                                <ScheduleStop 
                                    key={index}
                                    stop={stop}
                                    index={index}
                                    expandedStop={expandedStop}
                                    setExpandedStop={setExpandedStop}
                                    setActiveTab={setActiveTab}
                                    isCurrentStop={currentStop === index}
                                />
                            ))}
                        </div>
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl p-6">
                        <h2 className="text-2xl font-bold text-red-700 mb-4 flex items-center">
                            <i className="fas fa-play-circle mr-3"></i>
                            Santa's Song!
                        </h2>
                        <div className="relative w-full" style={{ paddingBottom: '56.25%' }}>
                            <iframe
                                className="absolute top-0 left-0 w-full h-full rounded-lg"
                                src="https://www.youtube.com/embed/-QGoHJ2Izwo?origin=https://boulder-santacon.com"
                                title="Boulder SantaCon Song"
                                frameBorder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                allowFullScreen
                            ></iframe>
                        </div>
                    </div>
                </div>
            );

            const QuestsPage = () => {
                const unlockedVenues = getUnlockedVenues();
                const nextUnlockTime = unlockedVenues.length < 3 ? "5:00pm" : unlockedVenues.length < 5 ? "7:00pm" : null;

                return (
                    <div className="space-y-6">
                        <div className="text-center mb-6">
                            <h1 className="text-3xl font-bold text-red-700 mb-2">
                                <i className="fas fa-trophy mr-2"></i>
                                Santa's Side Quests
                            </h1>
                            <p className="text-gray-600">Level up your SantaCon experience!</p>
                        </div>

                        {/* Your Badges */}
                        <div className="glass-effect rounded-lg shadow-xl overflow-hidden">
                            <button
                                onClick={() => setExpandedBadges(!expandedBadges)}
                                className="w-full p-6 text-left hover:bg-gray-50 transition-colors"
                            >
                                <div className="flex justify-between items-center">
                                    <div>
                                        <h2 className="text-2xl font-bold text-green-700">
                                            üèÜ Your Badges ({earnedBadges.length}/6)
                                        </h2>
                                        <p className="text-sm text-gray-600 mt-1">
                                            Badge details <i className={`fas fa-chevron-${expandedBadges ? 'up' : 'down'} ml-1`}></i>
                                        </p>
                                    </div>
                                </div>
                            </button>
                            
                            {expandedBadges && (
                                <div className="px-6 pb-6 border-t-2 border-gray-200 pt-4">
                                    <p className="text-gray-700 mb-4">
                                        Unlock badges by completing challenges and side quests throughout the night:
                                    </p>
                                    <div className="space-y-3">
                                        {badgeDefinitions.map(badge => (
                                            <div key={badge.id} className={`flex items-start p-3 rounded-lg ${
                                                earnedBadges.includes(badge.id) ? 'bg-green-50' : 'bg-gray-50'
                                            }`}>
                                                <span className="text-3xl mr-3">{badge.emoji}</span>
                                                <div className="flex-1">
                                                    <div className="font-bold text-gray-800">
                                                        {badge.name}
                                                        {earnedBadges.includes(badge.id) && (
                                                            <span className="ml-2 text-green-600">‚úì</span>
                                                        )}
                                                    </div>
                                                    <div className="text-sm text-gray-600">{badge.description}</div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Venue Quests */}
                        <div className="glass-effect rounded-lg shadow-xl p-6">
                            <h2 className="text-2xl font-bold text-red-700 mb-2">
                                üìç Venue Quests ({completedVenues.length}/{venueQuestsData.length})
                            </h2>
                            <p className="text-gray-600 mb-4">
                                Are you looking for more adventure? Try these side quests to add more fun to your SantaCon experience! Nearby venues unlock throughout the night, complete them to earn extra badges.
                            </p>

                            {unlockedVenues.length > 0 ? (
                                <div className="space-y-3">
                                    {unlockedVenues.map((venue, index) => (
                                        <div key={index} className="border-2 border-gray-200 rounded-lg p-4">
                                            <label className="flex items-start cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={completedVenues.includes(venue.name)}
                                                    onChange={(e) => {
                                                        if (e.target.checked) {
                                                            setCompletedVenues([...completedVenues, venue.name]);
                                                        } else {
                                                            setCompletedVenues(completedVenues.filter(v => v !== venue.name));
                                                        }
                                                    }}
                                                    className="mt-1 mr-3 w-5 h-5"
                                                />
                                                <div className="flex-1">
                                                    <div className="font-bold text-gray-800">{venue.name}</div>
                                                    <div className="text-sm text-gray-600">{venue.description}</div>
                                                </div>
                                            </label>
                                        </div>
                                    ))}
                                </div>
                            ) : (
                                <div className="bg-gray-100 border-2 border-gray-300 rounded-lg p-6 text-center">
                                    <i className="fas fa-lock text-4xl text-gray-400 mb-2"></i>
                                    <p className="text-gray-600">
                                        {nextUnlockTime ? `Venue quests unlock at ${nextUnlockTime}` : 'No venue quests available'}
                                    </p>
                                </div>
                            )}

                            {nextUnlockTime && unlockedVenues.length > 0 && (
                                <div className="mt-4 text-center text-sm text-gray-500">
                                    üîí More venues unlock at {nextUnlockTime}
                                </div>
                            )}
                        </div>

                        {/* Challenges */}
                        <div className="glass-effect rounded-lg shadow-xl p-6">
                            <h2 className="text-2xl font-bold text-green-700 mb-2">
                                üéØ Challenges ({completedChallenges.length}/9)
                            </h2>
                            <p className="text-gray-600 mb-4">
                                Complete these challenges throughout the night to earn badges and show off your Santa spirit!
                            </p>
                            <div className="space-y-3">
                                {[
                                    "High-five 10 people",
                                    "Take a group Santa photo",
                                    "Sing a carol in public",
                                    "Buy someone a drink",
                                    "Find someone dressed as an elf and hug them",
                                    "Post photo to Instagram/Facebook",
                                    "Get photo with a Boulder cop",
                                    "Complete a venue quest",
                                    "This is my 3rd+ SantaCon"
                                ].map((challenge, index) => (
                                    <label key={index} className="flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-50 transition">
                                        <input
                                            type="checkbox"
                                            checked={completedChallenges.includes(challenge)}
                                            onChange={(e) => {
                                                if (e.target.checked) {
                                                    setCompletedChallenges([...completedChallenges, challenge]);
                                                } else {
                                                    setCompletedChallenges(completedChallenges.filter(c => c !== challenge));
                                                }
                                            }}
                                            className="mr-3 w-5 h-5"
                                        />
                                        <span className="text-gray-800">{challenge}</span>
                                    </label>
                                ))}
                                <label className="flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-50 transition">
                                    <input
                                        type="checkbox"
                                        checked={completedChallenges.includes("Ask a stranger if they have been Nice (or Naughty) this year")}
                                        onChange={(e) => {
                                            if (e.target.checked) {
                                                setCompletedChallenges([...completedChallenges, "Ask a stranger if they have been Nice (or Naughty) this year"]);
                                            } else {
                                                setCompletedChallenges(completedChallenges.filter(c => c !== "Ask a stranger if they have been Nice (or Naughty) this year"));
                                            }
                                        }}
                                        className="mr-3 w-5 h-5"
                                    />
                                    <span className="text-gray-800">Ask a stranger if they have been Nice (or Naughty) this year</span>
                                </label>
                            </div>
                        </div>
                    </div>
                );
            };

            const CarolsPage = () => (
                <div className="space-y-6">
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold text-red-700 mb-2">
                            <i className="fas fa-music mr-2"></i>
                            Carol Sheets
                        </h1>
                        <p className="text-gray-600">Sing along with these festive favorites!</p>
                    </div>

                    {!selectedCarol ? (
                        <>
                            <div className="flex gap-2 mb-4">
                                <button
                                    onClick={() => setCarolType('nice')}
                                    className={`flex-1 py-3 px-4 rounded-lg font-semibold transition ${
                                        carolType === 'nice' 
                                            ? 'bg-green-600 text-white' 
                                            : 'bg-white text-green-600 border-2 border-green-600'
                                    }`}
                                >
                                    <i className="fas fa-angel mr-2"></i>
                                    Nice Songs
                                </button>
                                <button
                                    onClick={() => setCarolType('naughty')}
                                    className={`flex-1 py-3 px-4 rounded-lg font-semibold transition ${
                                        carolType === 'naughty' 
                                            ? 'bg-red-600 text-white' 
                                            : 'bg-white text-red-600 border-2 border-red-600'
                                    }`}
                                >
                                    <i className="fas fa-laugh mr-2"></i>
                                    Naughty Songs
                                </button>
                            </div>

                            <div className="space-y-3">
                                {carolsData[carolType].map((carol, index) => (
                                    <button
                                        key={index}
                                        onClick={() => setSelectedCarol(carol)}
                                        className="w-full glass-effect p-4 rounded-lg text-left hover:shadow-lg transition"
                                    >
                                        <div className="font-bold text-lg text-gray-800">{carol.title}</div>
                                        <div className="text-sm text-gray-600 mt-1">Tap to view lyrics</div>
                                    </button>
                                ))}
                            </div>
                        </>
                    ) : (
                        <div className="glass-effect rounded-lg shadow-xl p-6">
                            <div className="flex justify-between items-center mb-4">
                                <button
                                    onClick={() => setSelectedCarol(null)}
                                    className="text-red-600 font-semibold hover:text-red-700 transition"
                                >
                                    <i className="fas fa-arrow-left mr-2"></i>
                                    Back to carol list
                                </button>
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => setLyricsFontSize(Math.max(0.8, lyricsFontSize - 0.1))}
                                        className="bg-gray-200 hover:bg-gray-300 text-gray-700 w-10 h-10 rounded-full flex items-center justify-center transition"
                                        title="Decrease text size"
                                    >
                                        <i className="fas fa-minus"></i>
                                    </button>
                                    <button
                                        onClick={() => setLyricsFontSize(Math.min(2.0, lyricsFontSize + 0.1))}
                                        className="bg-red-600 hover:bg-red-700 text-white w-10 h-10 rounded-full flex items-center justify-center transition"
                                        title="Increase text size"
                                    >
                                        <i className="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <h2 className="text-2xl font-bold text-red-700 mb-6">{selectedCarol.title}</h2>
                            <div className="carol-lyrics text-gray-800" style={{ fontSize: `${lyricsFontSize}rem` }}>
                                {selectedCarol.lyrics}
                            </div>
                        </div>
                    )}
                </div>
            );

            const AboutPage = () => (
                <div className="space-y-6">
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold text-red-700 mb-2">
                            <i className="fas fa-info-circle mr-2"></i>
                            About SantaCon
                        </h1>
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl overflow-hidden">
                        <button
                            onClick={() => setExpandedAbout(expandedAbout === 'what' ? null : 'what')}
                            className="w-full p-6 text-left hover:bg-gray-50 transition-colors"
                        >
                            <div className="flex justify-between items-center">
                                <div className="flex-1">
                                    <h2 className="text-2xl font-bold text-green-700 mb-2">So what is SantaCon?</h2>
                                    <p className="text-gray-700">
                                        SantaCon takes place in major cities all over the world involving tens of thousands of Santa's.
                                    </p>
                                </div>
                                <i className={`fas fa-chevron-${expandedAbout === 'what' ? 'up' : 'down'} text-gray-400 ml-4 text-xl`}></i>
                            </div>
                        </button>
                        {expandedAbout === 'what' && (
                            <div className="px-6 pb-6 border-t-2 border-gray-200 pt-4">
                                <p className="text-gray-700 mb-4">
                                    It is a non-profit, non-political, non-religious & non-sensical, non-logical celebration of 
                                    holiday cheer, goodwill, and fun.
                                </p>
                                <p className="text-gray-700">
                                    There is no good reason to dress up in cheap Santa suits, run around town, give gifts, sing songs, 
                                    have strangers sit on our laps, and decide who is naughty or nice, but it's a lot of fun so Santa 
                                    does it anyway. Everyone loves Santa and Santa loves everyone! SantaCon is your chance to be Santa, 
                                    so step up and be jolly.
                                </p>
                            </div>
                        )}
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl overflow-hidden">
                        <button
                            onClick={() => setExpandedAbout(expandedAbout === 'boulder' ? null : 'boulder')}
                            className="w-full p-6 text-left hover:bg-gray-50 transition-colors"
                        >
                            <div className="flex justify-between items-center">
                                <div className="flex-1">
                                    <h2 className="text-2xl font-bold text-red-700 mb-2">Boulder's SantaCon</h2>
                                    <p className="text-gray-700">
                                        Every city has a different flavor of SantaCon.
                                    </p>
                                </div>
                                <i className={`fas fa-chevron-${expandedAbout === 'boulder' ? 'up' : 'down'} text-gray-400 ml-4 text-xl`}></i>
                            </div>
                        </button>
                        {expandedAbout === 'boulder' && (
                            <div className="px-6 pb-6 border-t-2 border-gray-200 pt-4">
                                <p className="text-gray-700 mb-4">
                                    The Boulder SantaCon is <strong>NOT</strong> a rowdy, 
                                    drunken frat boy fest. If you're expecting that, you'll be disappointed. The Santas do like their 
                                    good cheer, but we focus on having fun and making people laugh!
                                </p>
                                <p className="text-gray-700">
                                    This Black Friday marks our <strong>19th annual</strong> Boulder SantaCon! SantaCon has become a 
                                    Boulder tradition, our irreverent celebration of the holidays, where Santa suits, holiday cheer, 
                                    and festive weirdness take over our beloved town.
                                </p>
                            </div>
                        )}
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl overflow-hidden">
                        <button
                            onClick={() => setExpandedAbout(expandedAbout === 'rules' ? null : 'rules')}
                            className="w-full p-6 text-left hover:bg-gray-50 transition-colors"
                        >
                            <div className="flex justify-between items-center">
                                <div className="flex-1">
                                    <h2 className="text-2xl font-bold text-green-700 mb-2">
                                        <i className="fas fa-list-ol mr-2"></i>
                                        Santa's Rules
                                    </h2>
                                    <p className="text-gray-700">
                                        Santa looks like Santa.
                                    </p>
                                </div>
                                <i className={`fas fa-chevron-${expandedAbout === 'rules' ? 'up' : 'down'} text-gray-400 ml-4 text-xl`}></i>
                            </div>
                        </button>
                        {expandedAbout === 'rules' && (
                            <div className="px-6 pb-6 border-t-2 border-gray-200 pt-4">
                                <div className="space-y-4">
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">1. Santa looks like Santa.</h3>
                                        <p className="text-gray-700">
                                            HOLIDAY APPAREL IS MANDATORY. A Santa hat is NOT ENOUGH. Dress as an elf, a reindeer, 
                                            a christmas tree, Chanukah Harry, a lump of coal, etc. Local costume shops: Theatrical 
                                            Costumes, Etc. and Trendy Boutique, The Ritz, Ragstock, and The Dollar Store (for $1 Santa hats).
                                        </p>
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">2. Address your fellow santa as "Santa."</h3>
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">3. Q: Who's in Charge? A: Santa.</h3>
                                        <p className="text-gray-700">
                                            Memorize that phrase, and repeat it if anyone in authority asks you who the boss is. 
                                            There will be a test.
                                        </p>
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">4. Don't be "that" Santa</h3>
                                        <p className="text-gray-700">
                                            Everybody loves the big guy, right? HOWEVER, Santa strongly encourages Santa to obey all 
                                            "requests" made by any security guards and police officers, to ensure that no one ends up 
                                            in the klink.
                                        </p>
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">5. Santa is a good tipper!</h3>
                                        <p className="text-gray-700">
                                            Remember to tip your bartenders and servers. They work hard to keep Santa jolly!
                                        </p>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );

            const MailingListPage = () => (
                <div className="space-y-6">
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold text-red-700 mb-2">
                            <i className="fas fa-scroll mr-2"></i>
                            The Naughty List
                        </h1>
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl p-6">
                        <div className="text-center mb-6">
                            <span className="text-6xl mb-4 block">üéÑ</span>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">
                                Santa's making a list and checking it twice. Sign up to stay up to date on Boulder SantaCon!
                            </h2>
                        </div>

                        <form onSubmit={handleSubscribe} className="space-y-4">
                            <div>
                                <label htmlFor="email" className="block text-sm font-semibold text-gray-700 mb-2">
                                    Email Address
                                </label>
                                <input
                                    type="email"
                                    id="email"
                                    name="email"
                                    required
                                    className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-500 text-lg"
                                    placeholder="santa@northpole.com"
                                    autoComplete="email"
                                />
                            </div>

                            <button
                                type="submit"
                                className="w-full bg-red-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-red-700 transition text-lg"
                            >
                                <i className="fas fa-gift mr-2"></i>
                                Subscribe
                            </button>

                            {subscribeStatus && (
                                <div className={`text-center py-2 px-4 rounded-lg ${
                                    subscribeStatus.includes('Thanks') 
                                        ? 'bg-green-100 text-green-700' 
                                        : 'bg-yellow-100 text-yellow-700'
                                }`}>
                                    {subscribeStatus}
                                </div>
                            )}
                        </form>

                        <p className="text-xs text-gray-500 text-center mt-4">
                            We respect your privacy. Unsubscribe at any time.
                        </p>
                    </div>
                </div>
            );

            const AfterPartyPage = React.memo(() => (
                <div className="space-y-6">
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold text-red-700 mb-2">
                            <i className="fas fa-glass-cheers mr-2"></i>
                            The Santa Ball After Party!
                        </h1>
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl p-6">
                        <div className="text-center mb-6">
                            <span className="text-7xl mb-4 block">üéâ</span>
                            <h2 className="text-2xl font-bold text-gray-800 mb-4">
                                Keep the Party Going!
                            </h2>
                        </div>

                        <div className="space-y-4 mb-6">
                            <div className="flex items-start">
                                <i className="fas fa-map-marker-alt text-red-600 text-xl mr-4 mt-1"></i>
                                <div>
                                    <div className="font-bold text-gray-800">Location</div>
                                    <div className="text-gray-700">The Riverside</div>
                                </div>
                            </div>

                            <div className="flex items-start">
                                <i className="fas fa-clock text-red-600 text-xl mr-4 mt-1"></i>
                                <div>
                                    <div className="font-bold text-gray-800">Time</div>
                                    <div className="text-gray-700">9:00 PM - 1:00 AM</div>
                                </div>
                            </div>

                            <div className="flex items-start">
                                <i className="fas fa-music text-red-600 text-xl mr-4 mt-1"></i>
                                <div>
                                    <div className="font-bold text-gray-800">Entertainment</div>
                                    <div className="text-gray-700">DJ's, dancing, and holiday shenanigans!</div>
                                </div>
                            </div>
                        </div>

                        <div className="mb-6 rounded-lg overflow-hidden" style={{ height: '300px' }}>
                            <iframe
                                key="afterparty-map"
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d474.47377773047225!2d-105.27881746029514!3d40.014467182362914!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bec258e8bfb7f%3A0xbf27b5a8462b87a6!2sThe%20Riverside%20Private%20%26%20Public%20Event%20Venue!5e1!3m2!1sen!2sus!4v1762220959898!5m2!1sen!2sus"
                                width="100%"
                                height="100%"
                                style={{ border: 0 }}
                                allowFullScreen=""
                                loading="lazy"
                                referrerPolicy="no-referrer-when-downgrade"
                            ></iframe>
                        </div>

                        <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                            <p className="text-sm text-yellow-800">
                                <strong>Please Note:</strong> The Santa Ball has a cover charge. (Santa has to pay the DJ's and rent the venue!)
                            </p>
                        </div>

                        <a
                            href="#"
                            className="block w-full bg-gradient-to-r from-red-600 to-green-600 text-white py-4 px-4 rounded-lg font-bold text-center hover:from-red-700 hover:to-green-700 transition text-lg"
                        >
                            <i className="fas fa-ticket-alt mr-2"></i>
                            Get Tickets (Link Coming Soon)
                        </a>
                    </div>
                </div>
            ));

            const MajorAwardPage = () => (
                <div className="space-y-6">
                    <div className="text-center mb-6">
                        <h1 className="text-4xl font-bold text-red-700 mb-4">
                            üèÜ MAJOR AWARD! üèÜ
                        </h1>
                        <p className="text-3xl font-bold text-gray-800 mb-2">FRAGILE</p>
                        <p className="text-xl text-gray-600 mb-6">(Fra-gee-lay... must be Italian!)</p>
                        
                        <div className="bg-yellow-50 rounded-lg p-8 mb-6">
                            <div className="text-8xl mb-4">ü¶µüí°</div>
                            <p className="text-sm text-gray-500 italic">(Imagine the glorious leg lamp here)</p>
                        </div>

                        <div className="glass-effect rounded-lg p-6 mb-6">
                            <p className="text-xl font-bold text-gray-800 mb-4">
                                You won it! Mind power, Santa!
                            </p>
                            <p className="text-lg text-gray-700">
                                Nothing could drag you away from this soft glow of electric achievement gleaming in all its glory.
                            </p>
                        </div>

                        <button
                            onClick={() => setActiveTab('quests')}
                            className="w-full bg-gradient-to-r from-red-600 to-green-600 text-white py-4 px-6 rounded-lg font-bold hover:from-red-700 hover:to-green-700 transition text-lg"
                        >
                            <i className="fas fa-camera mr-2"></i>
                            Screenshot This Glory!
                        </button>
                    </div>
                </div>
            );

            useEffect(() => {
                if (darkMode) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }, [darkMode]);

            // Badge Modal
            const BadgeModal = ({ badgeId }) => {
                const badge = badgeDefinitions.find(b => b.id === badgeId);
                if (!badge) return null;

                return (
                    <div className="modal-overlay" onClick={() => setShowBadgeModal(null)}>
                        <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                            <div className="text-center">
                                <div className="text-6xl mb-4">{badge.emoji}</div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-2">Badge Earned!</h2>
                                <h3 className="text-xl font-bold text-red-700 mb-4">{badge.name}</h3>
                                <p className="text-gray-600 mb-6">{badge.description}</p>
                                <button
                                    onClick={() => setShowBadgeModal(null)}
                                    className="w-full bg-red-600 text-white py-3 px-6 rounded-lg font-bold hover:bg-red-700 transition text-lg"
                                >
                                    {badge.buttonText}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // All Badges Complete Modal
            const AllBadgesModal = () => (
                <div className="modal-overlay" onClick={() => setShowAllBadgesModal(false)}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div className="text-center">
                            <div className="text-4xl mb-4">‚ú®‚ú®‚ú®</div>
                            <h2 className="text-3xl font-bold text-gray-800 mb-2">CONGRATULATIONS!</h2>
                            <div className="text-5xl my-6">üèÜ</div>
                            <h3 className="text-2xl font-bold text-red-700 mb-4">MAJOR AWARD UNLOCKED</h3>
                            <p className="text-xl text-gray-700 mb-2">You've completed ALL 6 badges!</p>
                            <p className="text-lg text-gray-600 mb-6">You've earned something... Fra-gee-lay!</p>
                            <button
                                onClick={() => {
                                    setShowAllBadgesModal(false);
                                    setShowMajorAward(true);
                                    setActiveTab('major-award');
                                }}
                                className="w-full bg-gradient-to-r from-red-600 to-green-600 text-white py-4 px-6 rounded-lg font-bold hover:from-red-700 hover:to-green-700 transition text-lg"
                            >
                                View Your Award ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen gradient-bg">
                    <Snowflakes />
                    
                    <button
                        onClick={() => setDarkMode(!darkMode)}
                        className="fixed top-4 right-4 z-50 bg-white dark:bg-gray-800 text-gray-800 dark:text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center hover:scale-110 transition-transform"
                        title={darkMode ? "Switch to Light Mode" : "Switch to Dark Mode"}
                    >
                        <i className={`fas fa-${darkMode ? 'sun' : 'moon'} text-xl`}></i>
                    </button>
                    
                    <div className="max-w-2xl mx-auto px-4 py-6 pb-24">
                        {activeTab === 'home' && <HomePage />}
                        {activeTab === 'quests' && <QuestsPage />}
                        {activeTab === 'carols' && <CarolsPage />}
                        {activeTab === 'about' && <AboutPage />}
                        {activeTab === 'mailing' && <MailingListPage />}
                        {activeTab === 'afterparty' && <AfterPartyPage />}
                        {activeTab === 'major-award' && <MajorAwardPage />}
                    </div>

                    {showBadgeModal && <BadgeModal badgeId={showBadgeModal} />}
                    {showAllBadgesModal && <AllBadgesModal />}

                    <nav className="fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg">
                        <div className="max-w-2xl mx-auto px-4">
                            <div className="flex justify-around py-2">
                                <button
                                    onClick={() => setActiveTab('home')}
                                    className={`nav-button flex flex-col items-center py-2 px-4 rounded-lg ${
                                        activeTab === 'home' ? 'active' : 'text-gray-600'
                                    }`}
                                >
                                    <i className="fas fa-home text-xl mb-1"></i>
                                    <span className="text-xs font-semibold">Home</span>
                                </button>
                                <button
                                    onClick={() => setActiveTab('quests')}
                                    className={`nav-button flex flex-col items-center py-2 px-4 rounded-lg ${
                                        activeTab === 'quests' ? 'active' : 'text-gray-600'
                                    }`}
                                >
                                    <i className="fas fa-trophy text-xl mb-1"></i>
                                    <span className="text-xs font-semibold">Quests</span>
                                </button>
                                <button
                                    onClick={() => setActiveTab('carols')}
                                    className={`nav-button flex flex-col items-center py-2 px-4 rounded-lg ${
                                        activeTab === 'carols' ? 'active' : 'text-gray-600'
                                    }`}
                                >
                                    <i className="fas fa-music text-xl mb-1"></i>
                                    <span className="text-xs font-semibold">Carols</span>
                                </button>
                                <button
                                    onClick={() => setActiveTab('about')}
                                    className={`nav-button flex flex-col items-center py-2 px-4 rounded-lg ${
                                        activeTab === 'about' ? 'active' : 'text-gray-600'
                                    }`}
                                >
                                    <i className="fas fa-info-circle text-xl mb-1"></i>
                                    <span className="text-xs font-semibold">About</span>
                                </button>
                                <button
                                    onClick={() => setActiveTab('afterparty')}
                                    className={`nav-button flex flex-col items-center py-2 px-4 rounded-lg ${
                                        activeTab === 'afterparty' ? 'active' : 'text-gray-600'
                                    }`}
                                >
                                    <i className="fas fa-glass-cheers text-xl mb-1"></i>
                                    <span className="text-xs font-semibold">Party</span>
                                </button>
                            </div>
                        </div>
                    </nav>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
