<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <title>Boulder SantaCon 2025</title>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://santarchy.app/">
    <meta property="og:title" content="Boulder SantaCon 2025 - Black Friday">
    <meta property="og:description" content="Join us for the 19th Annual Boulder SantaCon! Black Friday, November 29th, 2024. Dress up as Santa and celebrate the holidays Boulder-style!">
    <meta property="og:image" content="https://santarchy.app/img/header.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://santarchy.app/">
    <meta property="twitter:title" content="Boulder SantaCon 2025 - Black Friday">
    <meta property="twitter:description" content="Join us for the 19th Annual Boulder SantaCon! Black Friday, November 29th, 2024. Dress up as Santa and celebrate the holidays Boulder-style!">
    <meta property="twitter:image" content="https://santarchy.app/img/header.jpg">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        body.dark-mode {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        body.dark-mode .glass-effect {
            background: rgba(40, 40, 40, 0.95);
            color: #e0e0e0;
        }
        body.dark-mode .gradient-bg {
            background: linear-gradient(180deg, #0a0a0a 0%, #7a1a1c 100%);
        }
        body.dark-mode .text-gray-800 {
            color: #e0e0e0 !important;
        }
        body.dark-mode .text-gray-700 {
            color: #b0b0b0 !important;
        }
        body.dark-mode .text-gray-600 {
            color: #909090 !important;
        }
        body.dark-mode .bg-white {
            background-color: #2a2a2a !important;
        }
        body.dark-mode .bg-gray-50 {
            background-color: #1f1f1f !important;
        }
        body.dark-mode .border-gray-200 {
            border-color: #404040 !important;
        }
        .gradient-bg {
            background: linear-gradient(180deg, #000000 0%, #BB2528 100%);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            transform: translateY(-2px);
        }
        .nav-button.active {
            background: #BB2528;
            color: white;
        }
        .carol-lyrics {
            font-size: 1.1rem;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        @media (max-width: 640px) {
            .carol-lyrics {
                font-size: 1rem;
                line-height: 1.6;
            }
        }
        .snowflake {
            position: fixed;
            top: -10px;
            z-index: 9999;
            user-select: none;
            cursor: default;
            animation: snowfall linear infinite;
            color: white;
            opacity: 0.8;
        }
        @keyframes snowfall {
            0% {
                transform: translateY(0vh) rotate(0deg);
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        .major-award-card {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            animation: bounceInCard 0.6s ease-out, pulseGlow 3s ease-in-out 0.6s infinite;
            transition: all 0.3s ease;
        }
        .major-award-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 40px rgba(255, 215, 0, 0.8);
        }
        @keyframes bounceInCard {
            0% {
                transform: scale(0.3) translateY(-50px);
                opacity: 0;
            }
            50% {
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.95);
            }
            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }
        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 4px 20px rgba(255, 215, 0, 0.5);
            }
            50% {
                box-shadow: 0 4px 40px rgba(255, 215, 0, 0.8);
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Snowflake component for festive effect
        const Snowflakes = () => {
            const snowflakes = Array.from({ length: 20 }, (_, i) => ({
                id: i,
                left: Math.random() * 100,
                animationDuration: 10 + Math.random() * 20,
                fontSize: 10 + Math.random() * 20,
                delay: Math.random() * 10
            }));

            return (
                <>
                    {snowflakes.map(flake => (
                        <div
                            key={flake.id}
                            className="snowflake"
                            style={{
                                left: `${flake.left}%`,
                                animationDuration: `${flake.animationDuration}s`,
                                fontSize: `${flake.fontSize}px`,
                                animationDelay: `${flake.delay}s`
                            }}
                        >
                            ‚ùÑ
                        </div>
                    ))}
                </>
            );
        };

        // Schedule data with detailed info
        const scheduleData = [
            { 
                time: "5:00 - 6:30pm", 
                title: "Avanti F&B",
                venue: "Roof top lounge",
                text: "Meet Santa on the roof top lounge.",
                drinkSpecials: "Mule Tide: (Gin, Pomegranate liqueur, Allspice Dram, cinnamon hibiscus, rosemary, lime, ginger beer.) | Spiked Eggnog: (Bacardi Spiced, Amaro, eggnog)",
                mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1964.7278793680014!2d-105.27691744636638!3d40.0178103639815!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bed2929560fbd%3A0xbe3c1820b8797eee!2sAvanti%20Food%20and%20Beverage%20Boulder!5e1!3m2!1sen!2sus!4v1762220992124!5m2!1sen!2sus",
                mapLink: "https://maps.app.goo.gl/uXvk9P3sDBJoXFJVA",
                notes: "When Santa is ready to leave, exit using the stairwell on the outdoor patio. We will gather the Santas and then head to \"Santa's Alley.\""
            },
            { 
                time: "6:30 - 7:00pm", 
                title: "Pearl Street Mall",
                venue: "Caroling and Group Photo",
                text: "After Santa's Alley, head east down the alley to 15th Street and loop around back onto Pearl St. by Illegal Pete's. We will continue to the Court House for a Group photo op and then sing a few carols.",
                mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1118.6936876331285!2d-105.2780970909969!3d40.01849507885064!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bed6384ffa061%3A0x12051a85a97cca48!2sBoulder%20County%20Historic%20Court%20House!5e1!3m2!1sen!2sus!4v1762221010590!5m2!1sen!2sus",
                mapLink: "https://maps.app.goo.gl/2EEgyuTTbZWFPHFS6",
                notes: null
            },
            { 
                time: "7:00 - 7:45pm", 
                title: "The Spotted James",
                venue: "Formerly The Walrus",
                text: "We haven't been to The James in a few years so we thought it's time to pay them a visit.",
                drinkSpecials: "[Spotted James to provide]",
                mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3795.6656851569173!2d-105.2837285588913!3d40.01670627162523!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bedbf881c8319%3A0x6ae46986776b8279!2sThe%20Spotted%20James!5e1!3m2!1sen!2sus!4v1762539907771!5m2!1sen!2sus",
                mapLink: null,
                notes: "If you're hungry, The Rio, T|aco, and Rosetta Hall are nearby."
            },
            { 
                time: "7:45 - 9:00pm", 
                title: "St. Julien Hotel",
                venue: "T-Zero Bar and the Grand Lobby",
                text: "This is Santa's favorite stop! The Julien won't say it publicly, but they LOVE when Santa visits them!",
                music: "David Lawrence and the Spoonful",
                mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7591.427428751109!2d-105.28521968514423!3d40.01584274961552!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bec26a391b9e9%3A0x86495a6b403f6317!2sSt%20Julien%20Hotel%20%26%20Spa!5e1!3m2!1sen!2sus!4v1762221047809!5m2!1sen!2sus",
                mapLink: "https://maps.app.goo.gl/wQpMRekk78dy9B778",
                notes: "If the line for drinks is too long, head to Jill's around the corner to the left."
            },
            { 
                time: "9:00 - 1:00am", 
                venue: "The Santa Ball @ The Riverside",
                text: "This is our last stop and the official after party for SantaCon! Make sure to grab a ticket before it sells out!",
                isAfterParty: true,
                mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d474.47377773047225!2d-105.27881746029514!3d40.014467182362914!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876bec258e8bfb7f%3A0xbf27b5a8462b87a6!2sThe%20Riverside%20Private%20%26%20Public%20Event%20Venue!5e1!3m2!1sen!2sus!4v1762220959898!5m2!1sen!2sus",
                mapLink: "https://maps.app.goo.gl/M6BUwhF2ZvT6ZQ9A8",
                notes: null
            }
        ];

        // Memoized ScheduleStop component to prevent re-renders from countdown
        const ScheduleStop = React.memo(({ stop, index, expandedStop, setExpandedStop, setActiveTab, isCurrentStop, isLeavingSoon, isPast, nextStop }) => (
            <div 
                className={`rounded-lg border-2 overflow-hidden relative ${
                    isCurrentStop && isLeavingSoon ? 'border-4 border-orange-400 shadow-2xl' :
                    isCurrentStop ? 'border-4 border-yellow-400 shadow-2xl' : 
                    isPast ? 'border-gray-300' :
                    stop.isAfterParty ? 'border-red-500' : 'border-gray-200'
                }`}
            >
                {isCurrentStop && (
                    <div className="absolute top-2 right-2 z-10">
                        <div className={`${isLeavingSoon ? 'bg-orange-600' : 'bg-red-600'} text-white px-3 py-1 rounded-full text-xs font-bold flex items-center animate-bounce`}>
                            <i className="fas fa-map-marker-alt mr-1"></i>
                            {isLeavingSoon ? "Santa's leaving soon!" : "Santa is Here!"}
                        </div>
                    </div>
                )}
                <button
                    onClick={() => setExpandedStop(expandedStop === index ? null : index)}
                    className={`w-full p-4 text-left transition-colors ${
                        isCurrentStop && isLeavingSoon ? 'bg-gradient-to-r from-orange-100 via-orange-200 to-orange-100' :
                        isCurrentStop ? 'bg-gradient-to-r from-yellow-100 via-yellow-200 to-yellow-100' :
                        isPast ? 'bg-gray-100' :
                        stop.isAfterParty 
                            ? 'bg-gradient-to-r from-red-100 to-green-100' 
                            : 'bg-white hover:bg-gray-50'
                    }`}
                >
                    <div className="flex justify-between items-center">
                        <div className="flex-1">
                            <div className={`font-bold text-lg flex items-center ${
                                isPast ? 'text-gray-500' :
                                isCurrentStop && isLeavingSoon ? 'text-orange-700' :
                                isCurrentStop ? 'text-red-700' : 'text-gray-800'
                            }`}>
                                {isPast && <i className="fas fa-check-circle text-green-600 mr-2"></i>}
                                {stop.time}
                            </div>
                            {stop.title ? (
                                <>
                                    <div className={`${
                                        isPast ? 'text-gray-500' :
                                        isCurrentStop && isLeavingSoon ? 'text-orange-600 font-semibold' :
                                        isCurrentStop ? 'text-red-600 font-semibold' :
                                        stop.isAfterParty ? 'text-red-700 font-semibold' : 'text-gray-700 font-semibold'
                                    } mt-1`}>
                                        {stop.title}
                                    </div>
                                    <div className={`${
                                        isPast ? 'text-gray-500' :
                                        isCurrentStop && isLeavingSoon ? 'text-orange-600' :
                                        isCurrentStop ? 'text-red-600' :
                                        stop.isAfterParty ? 'text-red-700' : 'text-gray-600'
                                    } text-sm`}>
                                        {stop.venue}
                                    </div>
                                </>
                            ) : (
                                <div className={`${
                                    isPast ? 'text-gray-500' :
                                    isCurrentStop && isLeavingSoon ? 'text-orange-600 font-semibold' :
                                    isCurrentStop ? 'text-red-600 font-semibold' :
                                    stop.isAfterParty ? 'text-red-700 font-semibold' : 'text-gray-600'
                                } mt-1`}>
                                    {stop.venue}
                                </div>
                            )}
                            {isCurrentStop && isLeavingSoon && nextStop && (
                                <div className="mt-2 text-sm font-bold text-orange-700">
                                    ‚è∞ LEAVING SOON! Next: {nextStop.title || nextStop.venue} ({nextStop.time.split(' - ')[0]})
                                </div>
                            )}
                        </div>
                        <i className={`fas fa-chevron-${expandedStop === index ? 'up' : 'down'} ${isPast ? 'text-gray-400' : 'text-gray-400'} ml-2`}></i>
                    </div>
                </button>
                
                {expandedStop === index && (
                    <div className="p-4 bg-gray-50 border-t-2 border-gray-200">
                        {stop.text && (
                            <div className="mb-4 text-gray-700">
                                <p>{stop.text}</p>
                            </div>
                        )}
                        {stop.drinkSpecials && (
                            <div className="bg-blue-50 border-l-4 border-blue-400 p-3 mb-4">
                                <p className="text-sm font-bold text-blue-800 mb-1">Drink Specials:</p>
                                <div className="text-sm text-gray-700">
                                    {stop.drinkSpecials.split(' | ').map((drink, idx) => {
                                        const [name, ingredients] = drink.split(': ');
                                        return (
                                            <div key={idx} className={idx > 0 ? 'mt-2' : ''}>
                                                <div className="font-bold">{name}</div>
                                                <div className="italic">{ingredients}</div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        )}
                        {stop.music && (
                            <div className="bg-purple-50 border-l-4 border-purple-400 p-3 mb-4">
                                <p className="text-sm font-bold text-purple-800 mb-1">Music:</p>
                                <p className="text-sm text-gray-700">{stop.music}</p>
                            </div>
                        )}
                        {stop.notes && (
                            <div className="bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4">
                                <p className="text-sm text-gray-700">{stop.notes}</p>
                            </div>
                        )}
                        {stop.mapEmbed && (
                            <div className="mb-4 rounded-lg overflow-hidden" style={{ height: '300px' }}>
                                <iframe
                                    src={stop.mapEmbed}
                                    width="100%"
                                    height="100%"
                                    style={{ border: 0 }}
                                    allowFullScreen=""
                                    loading="lazy"
                                    referrerPolicy="no-referrer-when-downgrade"
                                ></iframe>
                            </div>
                        )}
                        {stop.isAfterParty && (
                            <button
                                onClick={() => setActiveTab('afterparty')}
                                className="w-full bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700 transition"
                            >
                                <i className="fas fa-ticket-alt mr-2"></i>
                                View Party Details
                            </button>
                        )}
                    </div>
                )}
            </div>
        ));

        // Carol data - placeholder structure
        const carolsData = {
            nice: [
                {
                    title: "Frosty the Snowman",
                    lyrics: `Frosty the snowman was a jolly happy soul 
With a corncob pipe and a button nose and 
two eyes made out of coal 

Frosty the snowman is a fairy tale they say 
He was made of snow but the children know 
how he came to life one day 

There must have been some magic in that old 
silk hat they found For when they placed it on 
his head he began to dance around 

Frosty the snowman was alive as he could be
And the children say he could laugh and play 
just the same as you and me 

Thumpetty thump thump thumpety thump thump 
Look at Frosty go 
Thumpetty thump thump thumpety thump thump 
Over the hills of snow 

Frosty the snowman knew the sun was hot that day 
So he said "Let's run and we'll have some fun now 
before I melt away" 

Down to the village with a broomstick in his hand 
Running here and there all around the square saying 
Catch me if you can 

He led them down the streets of town right to the traffic cop 
And he only paused a moment when he heard him holler "Stop!" 
For Frosty the snow man had to hurry on his way 
But he waved goodbye saying "Don't you cry"
I'll be back again some day`
                },
                {
                    title: "Jingle Bells",
                    lyrics: `Dashing through the snow 
In a one horse open sleigh 
O'er the fields we go 
Laughing all the way. (ho, ho, ho!) 
Bells on bob tails ring 
Making spirits bright 
What fun it is to laugh and sing A sleighing song tonight 

Oh, jingle bells, jingle bells 
Jingle all the way 
Oh, what fun it is to ride 
In a one horse open sleigh 

Jingle Bells, Batman smells Robin laid an egg. 
The Batmobile lost a wheel and the Joker got away (Hey!) 

Jingle bells, shotgun shells, 
Santa Claus is dead, Rudolf got a .22 and shot him in the head. (Hey!) 

Oh, jingle bells, jingle bells 
Jingle all the way 
Oh, what fun it is to ride In a one.... horse.... open.... SLEIGHHHHH!!!!!!!`
                },
                {
                    title: "Rudolph the Red-nosed Reindeer",
                    lyrics: `You know Dasher and Dancer and Prancer and Vixen, 
Comet and Cupid and Donner and Blitzen., 
But do you recall? The most famous reindeer of all! 

Rudolph the Red-Nosed Reindeer (reindeer) 
Had a very shiny nose, (shiny nose) 
And if you ever saw it, (saw it) 
You would even say it glows (like a light bulb!), 

All of the other reindeer (reindeer) 
Used to laugh and call him names (like pinnochio) , 
They never let poor Rudolph (rudolph) 
Join in any reindeer games, (like monopoly) 

Then one foggy Christmas Eve, 
Santa came to say, ho ho ho, 
Rudolph with your nose so bright, 
Won't you guide my sleigh tonight? (tonight) 

Then how the reindeer loved him (loved him) 
As they shouted out with glee, yippee, 
Rudolph the Red-Nosed Reindeer, (reindeer) You'll go down in history!`
                },
                {
                    title: "Feliz Navidad",
                    lyrics: `Feliz Navidad 
Feliz Navidad 
Feliz Navidad 
Prospero A√É¬±o y Felicidad. 

I wanna wish you a Merry Christmas 
I wanna wish you a Merry Christmas 
I wanna wish you a Merry Christmas 
From the bottom of my heart.`
                },
                {
                    title: "Have a Holly Jolly Christmas",
                    lyrics: `Have a holly, jolly Christmas 
It's the best time of the year 
I don't know if there'll be snow but have a cup of cheer 

Have a holly, jolly Christmas 
And when you walk down the street 
Say Hello to friends you know and everyone you meet 

Oh ho, the mistletoe hung where you can see 
Somebody waits for you 
Kiss her once for me 

Have a holly jolly Christmas 
and in case you didn't hear 
Oh by golly have a holly jolly Christmas this year`
                },
                {
                    title: "We Wish you a Merry Christmas",
                    lyrics: `We Wish you a Merry Christmas
We Wish you a Merry Christmas
We Wish you a Merry Christmas and a Happy New Year

Good tidings we bring to you and your kin 
Good tidings for Xmas and a Happy New Year

Oh, bring us a figgy pudding 
Oh, bring us a figgy pudding
Oh, bring us a figgy pudding and a cup of good cheer 

We won't go until we get some 
We won't go until we get some
We won't go until we get some, 
so bring some out here:

We Wish you a Merry Christmas
We Wish you a Merry Christmas
We Wish you a Merry Christmas 
So bring some right here!`
                },
                {
                    title: "Deck the Halls",
                    lyrics: `Deck the halls with boughs of holly, Fala la la la, la la la 
Tis the season to be jolly, Fala la lala, la la la

Don we now our gay apparel, Fala la la la, la la la 
Troll the ancient Yuletide carol, Fa la la la la, la la la

See the blazing Yule before us, Falala la la, la la la 
Strike the harp and join the chorus. Falala la la, la la la

Follow me in merry measure, Fala la la la, la la la 
While I tell of Yuletide treasure, Fa la la la la, la la la

Fast away the old year passes, Fala la lala, la la la 
Hail the new, ye lads and lasses, Fala la lala, la la la

Sing we joyous, all together, Fala la la la, la la la 
Heedless of the wind and weather, Fala lala la, la la`
                }
            ],
            naughty: [
                {
                    title: "Walkin' Round in Women's Underwear",
                    lyrics: `Lacy things -- the wife is missin', 
Didn't ask -- her permission,
I'm wearin' her clothes, Her silk pantyhose, 
Walkin' 'round in women's underwear. 

In the store -- there's a teddy, 
Little straps -- like spaghetti, 
It holds me so tight, Like handcuffs at night, 
Walkin' 'round in women's underwear. 

In the office there's a guy named Melvin, 
He pretends that I am Murphy Brown. 
He'll say, "Are you ready?" 
I'll say, "Whoa, Man!" "Let's wait until our wives are out of town!"

Later on, if you wanna,
We can dress -- like Madonna, 
Put on some eyeshade, And join the parade, 
Walkin' 'round in women's underwear!

Lacy things... missin', 
Didn't ask... permission, 
Wearin' her clothes, Her silk pantyhose, 
Walkin' 'round in women's underwear, 
Walkin' 'round in women's underwear, 
Walkin' 'round in women's underwear!`
                },
                {
                    title: "Let it Flow",
                    lyrics: `(tune of "Let It Snow")

The weather outside is frightful, 
but the beer inside's delightful. 
And since we've no place to go,
Let it Flow, Let it Flow, Let it Flow! 

Oh we show no signs of stopping, 
and now we're really hopping. 
And the lights are turned way down low.
Let it Flow, Let it Flow, Let it Flow!! 

When we finally drink it dry, 
how we hate going back to the store. 
Maybe we'll just get high, 
and all fall asleep on the floor!! 

Oh the party is slowly dying. 
And our friends have all stopped buying. 
Now my bladder really wants to know. 
Where to go, Where to go, Where to go???`
                },
                {
                    title: "The 12 Drugs of Christmas",
                    lyrics: `On the first day of Christmas, my dealer gave to me: 
A Tab of Yellow Sunshine LSD 

2 Hundred Reds 
3 Pounds of Grass 
4 Grams of Hash 
5 Valiums 
6 Joints of Smoking 
7 Whites a-Buzzing 
8 Spoons of Snorting 
9 Caps of dropping 
10 Peyote Buttons 
11 Magic Mushrooms 
12 Pints a-dripping`
                },
                {
                    title: "We Wish you a Merry Christmas",
                    lyrics: `We wish you a merry Christmas 
We wish you a merry Christmas 
We wish you a merry Christmas 
Now bring us some beer!

We won't go until we get some 
We won't go until we get some 
We won't go until we get some`
                },
                {
                    title: "Deck my Balls",
                    lyrics: `Deck my balls with boughs of holly, Fa la la la la, la la la.
Tap the keg, inflate the dolly, Fala la la la, la la la

Don we now our rubber panties, Fa la la la la, la la la 
We're a bunch of twisted Santies, Fala la la la, la la la

Naughty girls are such a treasure, Fa la la la la, la la la 
These North Poles were made for pleasure, Falala lala, lala la

Fucked the elves, fucked all the reindeer, Fala la la la, la la la 
Fuck the cookies, bring us COLD BEER! Fa la la la la, la la`
                },
                {
                    title: "O Come all Ye Perverts",
                    lyrics: `(tune of "O Come all Ye Faithful")

O come all ye perverts
Come and have an orgy
O come ye, o cum ye
In brothels galore
Come and get plastered
And let's find some ho-girls
O come let us enjoy them
O come let us enjoy them
O come let us enjoy them
In brothels galore`
                }
            ]
        };

        function App() {
            const [activeTab, setActiveTab] = useState('home');
            const [carolType, setCarolType] = useState('nice');
            const [selectedCarol, setSelectedCarol] = useState(null);
            const [subscribeStatus, setSubscribeStatus] = useState('');
            const [lyricsFontSize, setLyricsFontSize] = useState(1.1); // Default font size in rem
            const [darkMode, setDarkMode] = useState(false);
            const [expandedStop, setExpandedStop] = useState(null);
            const [currentStop, setCurrentStop] = useState(null);
            const [expandedAbout, setExpandedAbout] = useState(null);
            const [countdown, setCountdown] = useState('');
            const [showAllBadgesModal, setShowAllBadgesModal] = useState(false);
            
            // Quest system state
            const [badgeLegendExpanded, setBadgeLegendExpanded] = useState(false);
            const [badgePopupQueue, setBadgePopupQueue] = useState([]);
            const [showingBadgePopup, setShowingBadgePopup] = useState(false);
            const [badgePopupsShown, setBadgePopupsShown] = useState(() => {
                const saved = localStorage.getItem('santacon_badge_popups_shown');
                return saved ? JSON.parse(saved) : {
                    jollyLeader: false,
                    giftGiver: false,
                    paparazzi: false,
                    marathonSanta: false,
                    superSanta: false,
                    boulderLegend: false
                };
            });
            const [badges, setBadges] = useState(() => {
                const saved = localStorage.getItem('santacon_badges');
                return saved ? JSON.parse(saved) : {
                    jollyLeader: false,
                    giftGiver: false,
                    paparazzi: false,
                    marathonSanta: false,
                    superSanta: false,
                    boulderLegend: false
                };
            });
            const [venueQuests, setVenueQuests] = useState(() => {
                const saved = localStorage.getItem('santacon_venue_quests');
                return saved ? JSON.parse(saved) : {
                    hotelBoulderado: false,
                    velvetElk: false,
                    pizzaCalore: false,
                    taco: false,
                    jungle: false
                };
            });
            const [challenges, setChallenges] = useState(() => {
                const saved = localStorage.getItem('santacon_challenges');
                return saved ? JSON.parse(saved) : {
                    highFive10: false,
                    groupPhoto: false,
                    giveGift: false,
                    findElf: false,
                    singCarol: false,
                    buyDrink: false,
                    compliment5: false,
                    congaLine: false,
                    photoCop: false,
                    postSocial: false,
                    boulderLegend: false,
                    niceOrNaughty: false
                };
            });

            // Venue quest data
            const venueQuestData = [
                {
                    id: 'hotelBoulderado',
                    name: 'Hotel Boulderado',
                    quest: 'üì∑ Take your picture in front of the Christmas tree in the lobby',
                    distance: '2 min. from the Courthouse',
                    unlockTime: 17 * 60, // 5:00pm in minutes
                    availableUntil: 19 * 60 + 30, // 7:30pm
                    icon: 'üì∑'
                },
                {
                    id: 'velvetElk',
                    name: 'The Velvet Elk',
                    quest: 'üç∫ Grab a drink',
                    distance: '1 min. from the Courthouse',
                    unlockTime: 17 * 60, // 5:00pm
                    availableUntil: 19 * 60 + 30, // 7:30pm
                    icon: 'üç∫'
                },
                {
                    id: 'pizzaCalore',
                    name: 'Pizza Calore',
                    quest: 'üçï Grab a slice between stops',
                    distance: '1 min. from the Courthouse',
                    unlockTime: 17 * 60, // 5:00pm
                    availableUntil: 19 * 60 + 30, // 7:30pm
                    icon: 'üçï'
                },
                {
                    id: 'taco',
                    name: 'T|Aco',
                    quest: 'üçπ Get a margarita and some chips!',
                    distance: '2 min. from The Spotted James',
                    unlockTime: 19 * 60, // 7:00pm
                    availableUntil: 20 * 60 + 30, // 8:30pm
                    icon: 'üçπ'
                },
                {
                    id: 'jungle',
                    name: 'Jungle',
                    quest: 'üçπ Get a tiki drink!',
                    distance: '5 min. from The Spotted James',
                    unlockTime: 19 * 60, // 7:00pm
                    availableUntil: 20 * 60 + 30, // 8:30pm
                    icon: 'üçπ'
                }
            ];

            // Calculate countdown to event
            const calculateCountdown = () => {
                const eventDate = new Date('2025-11-29T17:00:00'); // Nov 29, 2025, 5:00 PM
                const now = new Date();
                const diff = eventDate - now;

                if (diff < 0) {
                    return 'Event is happening NOW! üéâ';
                }

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));

                if (days > 0) {
                    return `In ${days} day${days !== 1 ? 's' : ''}`;
                } else if (hours > 0) {
                    return `Starting in ${hours} hour${hours !== 1 ? 's' : ''}!`;
                } else {
                    return 'Starting soon!';
                }
            };

            // Update countdown every minute
            useEffect(() => {
                setCountdown(calculateCountdown());
                const interval = setInterval(() => {
                    setCountdown(calculateCountdown());
                }, 60000); // Update every minute

                return () => clearInterval(interval);
            }, []);

            // Function to get current stop based on time
            const getCurrentStop = () => {
                const now = new Date();
                
                // Check if it's November 28, 2025 (Black Friday)
                const year = now.getFullYear();
                const month = now.getMonth(); // 0-11 (November is 10)
                const day = now.getDate();
                
                // Only activate on November 28, 2025
                if (year !== 2025 || month !== 10 || day !== 28) {
                    return null;
                }

                const currentHour = now.getHours();
                const currentMinute = now.getMinutes();
                const currentTime = currentHour * 60 + currentMinute; // Convert to minutes from midnight
                
                console.log('Current time in minutes:', currentTime, `(${currentHour}:${currentMinute})`);

                // Define time ranges for each stop (in minutes from midnight)
                const stops = [
                    { index: 0, start: 17 * 60, end: 18 * 60 + 30 }, // 5:00pm - 6:30pm (1020-1110 minutes) - Avanti
                    { index: 1, start: 18 * 60 + 30, end: 19 * 60 }, // 6:30pm - 7:00pm (1110-1140) - Pearl Street
                    { index: 2, start: 19 * 60, end: 19 * 60 + 45 }, // 7:00pm - 7:45pm (1140-1185) - Spotted James
                    { index: 3, start: 19 * 60 + 45, end: 21 * 60 }, // 7:45pm - 9:00pm (1185-1260) - St. Julien
                    { index: 4, start: 21 * 60, end: 25 * 60 } // 9:00pm - 1:00am (1260-1500) - Santa Ball
                ];

                for (let stop of stops) {
                    console.log(`Checking stop ${stop.index}: ${stop.start} <= ${currentTime} < ${stop.end}`);
                    if (currentTime >= stop.start && currentTime < stop.end) {
                        console.log('Match found! Stop index:', stop.index);
                        // Check if we're in the last 15 minutes (but not for the final stop - Santa Ball)
                        const timeUntilEnd = stop.end - currentTime;
                        const isLeavingSoon = (timeUntilEnd <= 15) && (stop.index !== 4);
                        return { index: stop.index, isLeavingSoon };
                    }
                }

                console.log('No matching stop found');
                return null;
            };

            // Update current stop every minute
            useEffect(() => {
                setCurrentStop(getCurrentStop());
                const interval = setInterval(() => {
                    setCurrentStop(getCurrentStop());
                }, 60000); // Update every minute

                return () => clearInterval(interval);
            }, []);

            // Auto-expand current stop when it changes (but allow user to collapse/expand others)
            useEffect(() => {
                if (currentStop !== null) {
                    setExpandedStop(currentStop.index);
                }
            }, [currentStop?.index]);

            // Scroll to top when changing tabs
            useEffect(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, [activeTab]);

            // Save quest state to localStorage
            useEffect(() => {
                localStorage.setItem('santacon_badges', JSON.stringify(badges));
            }, [badges]);

            useEffect(() => {
                localStorage.setItem('santacon_venue_quests', JSON.stringify(venueQuests));
            }, [venueQuests]);

            useEffect(() => {
                localStorage.setItem('santacon_challenges', JSON.stringify(challenges));
            }, [challenges]);

            // Badge messages
            const badgeMessages = {
                jollyLeader: {
                    emoji: 'üéÖüèª',
                    title: 'JOLLY LEADER',
                    message: "Your golden voice carried all the off-key Santas! You should be on America's Got Talent!",
                    buttonText: 'High Five! üôå'
                },
                giftGiver: {
                    emoji: 'üéÅ',
                    title: 'GIFT GIVER',
                    message: "Santa's checking his list, and you're officially on the Nice list! Your heart grew 3 sizes!",
                    buttonText: 'Cheers! üçª'
                },
                paparazzi: {
                    emoji: 'üì∏',
                    title: 'PAPARAZZI',
                    message: "You've documented this night better than TMZ! These pics will be legendary (or at least blackmail-worthy).",
                    buttonText: 'Noice! üòé'
                },
                marathonSanta: {
                    emoji: 'üèÉ',
                    title: 'MARATHON SANTA',
                    message: "You conquered all 5 stops! Your liver is a champion, and you need help! Legend status: achieved.",
                    buttonText: "You're #1! ü•á"
                },
                superSanta: {
                    emoji: 'üí™üèª',
                    title: 'SUPER SANTA',
                    message: "Most people stick to the main route. You? You're an overachiever. We're impressed. Your mom is proud.",
                    buttonText: 'Flex! üí™'
                },
                boulderLegend: {
                    emoji: 'ü´°',
                    title: 'BOULDER LEGEND',
                    message: "Three years of SantaCon? You're basically Boulder SantaCon royalty! Put this on your resume.",
                    buttonText: 'Respect! ü´°'
                }
            };

            // Check badge unlocks
            useEffect(() => {
                const newBadges = { ...badges };
                const newlyUnlocked = [];
                
                // Jolly Leader: Sang a carol
                if (challenges.singCarol && !badges.jollyLeader) {
                    newBadges.jollyLeader = true;
                    if (!badgePopupsShown.jollyLeader) {
                        newlyUnlocked.push('jollyLeader');
                    }
                }
                
                // Gift Giver: Bought drink OR gave gift
                if ((challenges.buyDrink || challenges.giveGift) && !badges.giftGiver) {
                    newBadges.giftGiver = true;
                    if (!badgePopupsShown.giftGiver) {
                        newlyUnlocked.push('giftGiver');
                    }
                }
                
                // Paparazzi: 3+ photo challenges (group photo, cop photo, social post, boulderado tree)
                const photoCount = [
                    challenges.groupPhoto,
                    challenges.photoCop,
                    challenges.postSocial,
                    venueQuests.hotelBoulderado
                ].filter(Boolean).length;
                if (photoCount >= 3 && !badges.paparazzi) {
                    newBadges.paparazzi = true;
                    if (!badgePopupsShown.paparazzi) {
                        newlyUnlocked.push('paparazzi');
                    }
                }
                
                // Marathon Santa: Auto-unlock at 8:15pm on event day
                const now = new Date();
                const year = now.getFullYear();
                const month = now.getMonth();
                const day = now.getDate();
                
                // Check if it's November 28, 2025 (Black Friday)
                if (year === 2025 && month === 10 && day === 28) {
                    const currentTime = now.getHours() * 60 + now.getMinutes();
                    const marathonUnlockTime = 20 * 60 + 15; // 8:15pm in minutes
                    
                    if (currentTime >= marathonUnlockTime && !badges.marathonSanta) {
                        newBadges.marathonSanta = true;
                        if (!badgePopupsShown.marathonSanta) {
                            newlyUnlocked.push('marathonSanta');
                        }
                    }
                }
                
                // Super Santa: 1 venue quest + 5 challenge quests
                const venueCount = Object.values(venueQuests).filter(Boolean).length;
                const challengeCount = Object.values(challenges).filter(Boolean).length;
                if (venueCount >= 1 && challengeCount >= 5 && !badges.superSanta) {
                    newBadges.superSanta = true;
                    if (!badgePopupsShown.superSanta) {
                        newlyUnlocked.push('superSanta');
                    }
                }
                
                // Boulder Legend: Manual checkbox
                if (challenges.boulderLegend && !badges.boulderLegend) {
                    newBadges.boulderLegend = true;
                    if (!badgePopupsShown.boulderLegend) {
                        newlyUnlocked.push('boulderLegend');
                    }
                }
                
                // Update badges if any changed
                if (JSON.stringify(newBadges) !== JSON.stringify(badges)) {
                    setBadges(newBadges);
                }
                
                // Queue newly unlocked badge pop-ups
                if (newlyUnlocked.length > 0) {
                    setBadgePopupQueue(prev => [...prev, ...newlyUnlocked]);
                }
            }, [challenges, venueQuests, currentStop, badges, badgePopupsShown]);

            // Check if all badges are complete for Major Award
            // Only trigger after all badge popups have been shown
            useEffect(() => {
                const allBadgesComplete = Object.values(badges).every(badge => badge === true);
                const alreadyShown = localStorage.getItem('santacon_major_award_shown');
                
                // Only show Major Award modal if:
                // 1. All badges are complete
                // 2. Haven't shown it before
                // 3. Badge popup queue is empty (all badge popups have been shown)
                // 4. Not currently showing a badge popup
                if (allBadgesComplete && !alreadyShown && !showAllBadgesModal && 
                    badgePopupQueue.length === 0 && !showingBadgePopup) {
                    setShowAllBadgesModal(true);
                    localStorage.setItem('santacon_major_award_shown', 'true');
                }
            }, [badges, showAllBadgesModal, badgePopupQueue, showingBadgePopup]);

            // Handle badge popup queue
            useEffect(() => {
                if (badgePopupQueue.length > 0 && !showingBadgePopup) {
                    setShowingBadgePopup(true);
                }
            }, [badgePopupQueue, showingBadgePopup]);

            // Save badge popups shown to localStorage
            useEffect(() => {
                localStorage.setItem('santacon_badge_popups_shown', JSON.stringify(badgePopupsShown));
            }, [badgePopupsShown]);

            const handleBadgePopupClose = () => {
                const [currentBadge, ...remaining] = badgePopupQueue;
                
                // Mark this badge popup as shown
                setBadgePopupsShown(prev => ({
                    ...prev,
                    [currentBadge]: true
                }));
                
                // Remove from queue
                setBadgePopupQueue(remaining);
                setShowingBadgePopup(false);
            };

            const handleSubscribe = async (e) => {
                e.preventDefault();
                setSubscribeStatus('Subscribing...');
                
                const emailInput = e.target.elements.email.value;

                try {
                    // Note: In production, this should go through a backend server to protect API keys
                    // For now, using Mailchimp's JSONP endpoint
                    const formData = new FormData();
                    formData.append('EMAIL', emailInput);
                    formData.append('b_2562f63497', ''); // Bot honeypot

                    const response = await fetch(
                        'https://us7.list-manage.com/subscribe/post?u=97c79a453122b17d97b904bea&id=2562f63497',
                        {
                            method: 'POST',
                            body: formData,
                            mode: 'no-cors'
                        }
                    );

                    setSubscribeStatus('Thanks for subscribing! √∞≈∏≈Ω‚Ä¶');
                    e.target.reset();
                    setTimeout(() => setSubscribeStatus(''), 3000);
                } catch (error) {
                    setSubscribeStatus('Oops! Please try again.');
                    setTimeout(() => setSubscribeStatus(''), 3000);
                }
            };

            const HomePage = () => (
                <div className="space-y-6">
                    <div className="text-center mb-8">
                        <img 
                            src="img/header.jpg" 
                            alt="Boulder SantaCon - The 19th Annual - Black Friday" 
                            className="w-full max-w-2xl mx-auto rounded-lg shadow-2xl"
                        />
                        
                        {/* Social Media & Calendar Buttons */}
                        <div className="flex justify-center gap-3 mt-6">
                            <a 
                                href="https://www.instagram.com/bouldersantacon" 
                                target="_blank" 
                                rel="noopener noreferrer"
                                className="border-2 border-red-600 text-red-600 px-5 py-2.5 rounded-lg font-semibold hover:bg-red-600 hover:text-white transition-all shadow-lg flex items-center"
                            >
                                <i className="fab fa-instagram mr-2"></i>
                                Follow
                            </a>
                            <a 
                                href="https://www.facebook.com/events/1458481705240919" 
                                target="_blank" 
                                rel="noopener noreferrer"
                                className="border-2 border-red-600 text-red-600 px-5 py-2.5 rounded-lg font-semibold hover:bg-red-600 hover:text-white transition-all shadow-lg"
                            >
                                RSVP
                            </a>
                            <button
                                onClick={() => {
                                    // Create .ics file content
                                    const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Boulder SantaCon//EN
BEGIN:VEVENT
UID:bouldersantacon2025@santarchy.app
DTSTAMP:20251106T000000Z
DTSTART:20251128T170000
DTEND:20251129T010000
SUMMARY:Boulder SantaCon 2025
DESCRIPTION:The 19th Annual Boulder SantaCon! Dress up as Santa and join us for a festive night through Boulder. Visit https://santarchy.app for schedule and details.
LOCATION:Avanti F&B, 1401 Pearl St, Boulder, CO 80302
URL:https://santarchy.app
STATUS:CONFIRMED
SEQUENCE:0
END:VEVENT
END:VCALENDAR`;
                                    
                                    // Create blob and download
                                    const blob = new Blob([icsContent], { type: 'text/calendar' });
                                    const url = window.URL.createObjectURL(blob);
                                    const link = document.createElement('a');
                                    link.href = url;
                                    link.download = 'boulder-santacon-2025.ics';
                                    document.body.appendChild(link);
                                    link.click();
                                    document.body.removeChild(link);
                                    window.URL.revokeObjectURL(url);
                                }}
                                className="border-2 border-red-600 text-red-600 px-5 py-2.5 rounded-lg font-semibold hover:bg-red-600 hover:text-white transition-all shadow-lg flex items-center"
                            >
                                <i className="fas fa-calendar-plus mr-2"></i>
                                Cal
                            </button>
                        </div>
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl p-6">
                        <h2 className="text-2xl font-bold text-red-700 mb-2 flex items-center">
                            <i className="fas fa-calendar-alt mr-3"></i>
                            Santa's Schedule
                        </h2>
                        <p className="text-gray-700 mb-2">
                            Black Friday, Nov. 28, 2025
                        </p>
                        <button 
                            onClick={() => setActiveTab('about')}
                            className="text-sm text-red-600 hover:text-red-800 mb-4 flex items-center font-semibold"
                        >
                            <i className="fas fa-info-circle mr-1"></i>
                            What is SantaCon?
                        </button>
                        <div className="space-y-3">
                            {scheduleData.map((stop, index) => {
                                const isCurrentStopActive = currentStop?.index === index;
                                const isPastStop = currentStop && index < currentStop.index;
                                const nextStopData = index < scheduleData.length - 1 ? scheduleData[index + 1] : null;
                                
                                return (
                                    <ScheduleStop 
                                        key={index}
                                        stop={stop}
                                        index={index}
                                        expandedStop={expandedStop}
                                        setExpandedStop={setExpandedStop}
                                        setActiveTab={setActiveTab}
                                        isCurrentStop={isCurrentStopActive}
                                        isLeavingSoon={currentStop?.index === index && currentStop?.isLeavingSoon}
                                        isPast={isPastStop}
                                        nextStop={nextStopData}
                                    />
                                );
                            })}
                        </div>
                    </div>

                    {/* Side Quests Promo Card */}
                    <div className="rounded-lg shadow-xl p-6 overflow-hidden" 
                         style={{
                             background: 'linear-gradient(to right, #fef3c7, #fde68a)',
                             border: '3px solid #d97706'
                         }}>
                        <div className="text-center">
                            <h2 className="text-2xl font-bold text-amber-600 mb-3">
                                Santa's Side Quests!
                            </h2>
                            <p className="text-yellow-600 text-lg mb-4 leading-relaxed">
                                Looking for more adventure, young Frodo? Explore bonus venues and earn badges!
                            </p>
                            <button
                                onClick={() => setActiveTab('quests')}
                                className="bg-amber-500 text-white px-8 py-3 rounded-lg font-bold hover:bg-amber-600 transition-all shadow-lg text-lg"
                            >
                                <i className="fas fa-hat-wizard mr-2"></i>
                                Adventure Awaits!
                            </button>
                        </div>
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl p-6">
                        <h2 className="text-2xl font-bold text-red-700 mb-4 flex items-center">
                            <i className="fas fa-play-circle mr-3"></i>
                            Santa's Song!
                        </h2>
                        <div className="relative w-full" style={{ paddingBottom: '56.25%' }}>
                            <iframe
                                className="absolute top-0 left-0 w-full h-full rounded-lg"
                                src="https://www.youtube.com/embed/-QGoHJ2Izwo?origin=https://boulder-santacon.com"
                                title="Boulder SantaCon Song"
                                frameBorder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                allowFullScreen
                            ></iframe>
                        </div>
                    </div>
                </div>
            );

            const CarolsPage = () => (
                <div className="space-y-6">
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold text-red-700 mb-2">
                            <i className="fas fa-music mr-2"></i>
                            Carol Sheets
                        </h1>
                        <p className="text-gray-600">Sing along with these festive favorites!</p>
                    </div>

                    {!selectedCarol ? (
                        <>
                            <div className="flex gap-2 mb-4">
                                <button
                                    onClick={() => setCarolType('nice')}
                                    className={`flex-1 py-3 px-4 rounded-lg font-semibold transition ${
                                        carolType === 'nice' 
                                            ? 'bg-green-600 text-white' 
                                            : 'bg-white text-green-600 border-2 border-green-600'
                                    }`}
                                >
                                    <i className="fas fa-angel mr-2"></i>
                                    Nice Songs
                                </button>
                                <button
                                    onClick={() => setCarolType('naughty')}
                                    className={`flex-1 py-3 px-4 rounded-lg font-semibold transition ${
                                        carolType === 'naughty' 
                                            ? 'bg-red-600 text-white' 
                                            : 'bg-white text-red-600 border-2 border-red-600'
                                    }`}
                                >
                                    <i className="fas fa-laugh mr-2"></i>
                                    Naughty Songs
                                </button>
                            </div>

                            <div className="space-y-3">
                                {carolsData[carolType].map((carol, index) => (
                                    <button
                                        key={index}
                                        onClick={() => setSelectedCarol(carol)}
                                        className="w-full glass-effect p-4 rounded-lg text-left hover:shadow-lg transition"
                                    >
                                        <div className="font-bold text-lg text-gray-800">{carol.title}</div>
                                        <div className="text-sm text-gray-600 mt-1">Tap to view lyrics</div>
                                    </button>
                                ))}
                            </div>
                        </>
                    ) : (
                        <div className="glass-effect rounded-lg shadow-xl p-6">
                            <div className="flex justify-between items-center mb-4">
                                <button
                                    onClick={() => setSelectedCarol(null)}
                                    className="text-red-600 font-semibold hover:text-red-700 transition"
                                >
                                    <i className="fas fa-arrow-left mr-2"></i>
                                    Back to carol list
                                </button>
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => setLyricsFontSize(Math.max(0.8, lyricsFontSize - 0.1))}
                                        className="bg-gray-200 hover:bg-gray-300 text-gray-700 w-10 h-10 rounded-full flex items-center justify-center transition text-sm font-bold"
                                        title="Decrease text size"
                                    >
                                        Aa
                                    </button>
                                    <button
                                        onClick={() => setLyricsFontSize(Math.min(2.0, lyricsFontSize + 0.1))}
                                        className="bg-red-600 hover:bg-red-700 text-white w-10 h-10 rounded-full flex items-center justify-center transition text-lg font-bold"
                                        title="Increase text size"
                                    >
                                        Aa
                                    </button>
                                </div>
                            </div>
                            <h2 className="text-2xl font-bold text-red-700 mb-6">{selectedCarol.title}</h2>
                            <div className="carol-lyrics text-gray-800" style={{ fontSize: `${lyricsFontSize}rem` }}>
                                {selectedCarol.lyrics}
                            </div>
                        </div>
                    )}
                </div>
            );

            const AboutPage = () => (
                <div className="space-y-6">
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold text-red-700 mb-2">
                            <i className="fas fa-info-circle mr-2"></i>
                            About SantaCon
                        </h1>
                    </div>

                    {/* What is SantaCon */}
                    <div id="section-what" className="glass-effect rounded-lg shadow-xl overflow-hidden">
                        <button
                            onClick={(e) => {
                                setExpandedAbout(expandedAbout === 'what' ? null : 'what');
                                if (expandedAbout !== 'what') {
                                    setTimeout(() => {
                                        document.getElementById('section-what')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    }, 100);
                                }
                            }}
                            className="w-full p-6 text-left hover:bg-gray-50 transition-colors"
                        >
                            <div className="flex justify-between items-center">
                                <div className="flex-1">
                                    <h2 className="text-2xl font-bold text-red-700 mb-2">What is SantaCon?</h2>
                                    <p className="text-gray-700">
                                        It's not a pub crawl!
                                    </p>
                                </div>
                                <i className={`fas fa-chevron-${expandedAbout === 'what' ? 'up' : 'down'} text-gray-400 ml-4 text-xl`}></i>
                            </div>
                        </button>
                        {expandedAbout === 'what' && (
                            <div className="px-6 pb-6 border-t-2 border-gray-200 pt-4">
                                <p className="text-gray-700 mb-4">
                                    It is a non-profit, non-political, non-religious & non-sensical, non-logical celebration of 
                                    holiday cheer, goodwill, and fun.
                                </p>
                                <img 
                                    src="img/group.jpg" 
                                    alt="SantaCon" 
                                    className="w-full max-w-lg mx-auto mb-4 rounded-lg shadow-lg"
                                />
                                <p className="text-gray-700">
                                    There is no good reason to dress up in cheap Santa suits, run around town, give gifts, sing songs, 
                                    have strangers sit on our laps, and decide who is naughty or nice, but it's a lot of fun so Santa 
                                    does it anyway. Everyone loves Santa and Santa loves everyone! SantaCon is your chance to be Santa, 
                                    so step up and be jolly.
                                </p>
                            </div>
                        )}
                    </div>

                    {/* SantaCon's History */}
                    <div id="section-history" className="glass-effect rounded-lg shadow-xl overflow-hidden">
                        <button
                            onClick={() => {
                                setExpandedAbout(expandedAbout === 'history' ? null : 'history');
                                if (expandedAbout !== 'history') {
                                    setTimeout(() => {
                                        document.getElementById('section-history')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    }, 100);
                                }
                            }}
                            className="w-full p-6 text-left hover:bg-gray-50 transition-colors"
                        >
                            <div className="flex justify-between items-center">
                                <div className="flex-1">
                                    <h2 className="text-2xl font-bold text-green-700 mb-2">SantaCon's History</h2>
                                    <p className="text-gray-700">
                                        From Copenhagen to the world.
                                    </p>
                                </div>
                                <i className={`fas fa-chevron-${expandedAbout === 'history' ? 'up' : 'down'} text-gray-400 ml-4 text-xl`}></i>
                            </div>
                        </button>
                        {expandedAbout === 'history' && (
                            <div className="px-6 pb-6 border-t-2 border-gray-200 pt-4">
                                <p className="text-gray-700 mb-4">
                                    SantaCon began in San Francisco in 1994, inspired by a 1974 Danish activist theatre group called Solvognen, who gathered dozens of "Santas" in Copenhagen to hand out items from department store shelves as "presents" before being arrested.
                                </p>
                                <img 
                                    src="img/sfsantacon.jpg" 
                                    alt="San Francisco Cacophony Society SantaCon" 
                                    className="w-full max-w-lg mx-auto mb-4 rounded-lg shadow-lg"
                                />
                                <p className="text-gray-700 mb-4">
                                    Staged as street theater by the San Francisco Cacophony Society‚Äîa counterculture group focused on pranks and subversive art‚Äîthe first event was called "Cheap Suit Santas" and aimed to make fun of Christmas consumerism. Originally influenced by the Surrealist movement and Discordianism, it wasn't intended to be a recurring event, but returned in 1995 with 100 participants.
                                </p>
                                <img 
                                    src="img/hanging.jpg" 
                                    alt="SantaCon History" 
                                    className="w-full max-w-lg mx-auto mb-4 rounded-lg shadow-lg"
                                />
                                <p className="text-gray-700 mb-4">
                                    SantaCon spread rapidly: Portland in 1996, Seattle in 1997, and Los Angeles and New York in 1998. The rise of the internet and the website Santarchy.com helped advertise the event, allowing people around the world to bring it to their cities. Today, SantaCon takes place in hundreds of cities globally, though it has evolved significantly from its countercultural roots into the festive pub crawl we know today.
                                </p>
                                <a 
                                    href="https://journal.burningman.org/2022/12/opinion/shenanigans/meet-santa-zero/"
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="inline-block bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700 transition"
                                >
                                    <i className="fas fa-file-alt mr-2"></i>
                                    Interview: Meet Santa Zero
                                </a>
                            </div>
                        )}
                    </div>

                    {/* Boulder's SantaCon */}
                    <div id="section-boulder" className="glass-effect rounded-lg shadow-xl overflow-hidden">
                        <button
                            onClick={() => {
                                setExpandedAbout(expandedAbout === 'boulder' ? null : 'boulder');
                                if (expandedAbout !== 'boulder') {
                                    setTimeout(() => {
                                        document.getElementById('section-boulder')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    }, 100);
                                }
                            }}
                            className="w-full p-6 text-left hover:bg-gray-50 transition-colors"
                        >
                            <div className="flex justify-between items-center">
                                <div className="flex-1">
                                    <h2 className="text-2xl font-bold text-red-700 mb-2">Boulder's SantaCon</h2>
                                    <p className="text-gray-700">
                                        The free-range, organic, gluten-free SantaCon.
                                    </p>
                                </div>
                                <i className={`fas fa-chevron-${expandedAbout === 'boulder' ? 'up' : 'down'} text-gray-400 ml-4 text-xl`}></i>
                            </div>
                        </button>
                        {expandedAbout === 'boulder' && (
                            <div className="px-6 pb-6 border-t-2 border-gray-200 pt-4">
                                <p className="text-gray-700 mb-4">
                                    Boulder SantaCon launched in 2006 with a simple mission: instead of fighting crowds at the mall on Black Friday, why not dress up as Santa and celebrate the holidays in the most ridiculous way possible? It was a subtle protest against consumerism wrapped in cheap red suits and holiday cheer.
                                </p>
                                <img 
                                    src="img/first-santacon.jpg" 
                                    alt="First Boulder SantaCon" 
                                    className="w-full max-w-lg mx-auto mb-4 rounded-lg shadow-lg"
                                />
                                <p className="text-gray-700 mb-4">
                                    The first few years were beautifully chaotic. We started with about 20 Santas "shopping" at the 29th Street Mall, much to the confusion of mall security. We'd take the HOP bus downtown, which became known as "Santa's Sleigh." Dozens of Santas would cram in like festive sardines while bewildered commuters laughed and took photos. One year, a pop-up speakeasy called "Santa's Pub" appeared, serving cold PBR's, hot chocolate, and peppermint schnapps to thirsty Santas.
                                </p>
                                <img 
                                    src="img/believe.jpg" 
                                    alt="Boulder SantaCon Believe" 
                                    className="w-full max-w-lg mx-auto mb-4 rounded-lg shadow-lg"
                                />
                                <p className="text-gray-700">
                                    This Black Friday marks our 19th annual event and it has become a Boulder tradition. Unlike the rowdy reputation SantaCon has earned in other cities, Boulder's version has always been about fun, not mayhem. Come join Santa!
                                </p>
                            </div>
                        )}
                    </div>

                    {/* Santa's Rules */}
                    <div id="section-rules" className="glass-effect rounded-lg shadow-xl overflow-hidden">
                        <button
                            onClick={() => {
                                setExpandedAbout(expandedAbout === 'rules' ? null : 'rules');
                                if (expandedAbout !== 'rules') {
                                    setTimeout(() => {
                                        document.getElementById('section-rules')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    }, 100);
                                }
                            }}
                            className="w-full p-6 text-left hover:bg-gray-50 transition-colors"
                        >
                            <div className="flex justify-between items-center">
                                <div className="flex-1">
                                    <h2 className="text-2xl font-bold text-green-700 mb-2">
                                        <i className="fas fa-list-ol mr-2"></i>
                                        Santa's Rules
                                    </h2>
                                    <p className="text-gray-700">
                                        Yes, SantaCon has a few rules.
                                    </p>
                                </div>
                                <i className={`fas fa-chevron-${expandedAbout === 'rules' ? 'up' : 'down'} text-gray-400 ml-4 text-xl`}></i>
                            </div>
                        </button>
                        {expandedAbout === 'rules' && (
                            <div className="px-6 pb-6 border-t-2 border-gray-200 pt-4">
                                <div className="space-y-4">
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">1. Santa looks like Santa.</h3>
                                        <p className="text-gray-700 mb-4">
                                            HOLIDAY APPAREL IS MANDATORY. A Santa hat is NOT ENOUGH. Dress as an elf, a reindeer, 
                                            a christmas tree, Hanukkah Harry, a lump of coal, etc. If you show up without a costume, you will wish that you had! SantaCon is more fun if everyone is participating!
                                        </p>
                                        <img 
                                            src="img/costumes.jpg" 
                                            alt="Santa Costumes" 
                                            className="w-full max-w-lg mx-auto rounded-lg shadow-lg"
                                        />
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">2. Address your fellow santa as "Santa."</h3>
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">3. When Santa "ho, Ho, HO's," it's time to go, Go, GO!</h3>
                                        <p className="text-gray-700">
                                            When you hear all the Santa's chant, "HO! HO! HO!" it means that we're getting ready to leave to the next stop.
                                        </p>
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">4. Who's in Charge?</h3>
                                        <p className="text-gray-700">
                                            Santa. Memorize that phrase, and repeat it if anyone in authority asks you who the boss is. 
                                            There will be a test.
                                        </p>
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">5. Don't be "that" Santa</h3>
                                        <p className="text-gray-700 mb-4">
                                            Everybody loves the big guy, right? HOWEVER, Santa strongly encourages Santa to obey all 
                                            "requests" made by any security guards and police officers, to ensure that no one ends up 
                                            in the klink.
                                        </p>
                                        <img 
                                            src="img/lineup.jpg" 
                                            alt="Santa Lineup" 
                                            className="w-full max-w-lg mx-auto rounded-lg shadow-lg"
                                        />
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-lg text-gray-800 mb-2">6. Santa is a good tipper!</h3>
                                        <p className="text-gray-700">
                                            Remember to tip your bartenders and servers. They work hard to keep Santa jolly!
                                        </p>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                    {/* What to Bring? */}
                    <div id="section-bring" className="glass-effect rounded-lg shadow-xl overflow-hidden">
                        <button
                            onClick={() => {
                                setExpandedAbout(expandedAbout === 'bring' ? null : 'bring');
                                if (expandedAbout !== 'bring') {
                                    setTimeout(() => {
                                        document.getElementById('section-bring')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    }, 100);
                                }
                            }}
                            className="w-full p-6 text-left hover:bg-gray-50 transition-colors"
                        >
                            <div className="flex justify-between items-center">
                                <div className="flex-1">
                                    <h2 className="text-2xl font-bold text-red-700 mb-2">
                                        <i className="fas fa-shopping-bag mr-2"></i>
                                        What to Bring?
                                    </h2>
                                    <p className="text-gray-700">
                                        Be prepared for Boulder SantaCon!
                                    </p>
                                </div>
                                <i className={`fas fa-chevron-${expandedAbout === 'bring' ? 'up' : 'down'} text-gray-400 ml-4 text-xl`}></i>
                            </div>
                        </button>
                        {expandedAbout === 'bring' && (
                            <div className="px-6 pb-6 border-t-2 border-gray-200 pt-4">
                                <ul className="space-y-3 text-gray-700">
                                    <li className="flex items-start">
                                        <i className="fas fa-check-circle text-green-600 mr-3 mt-1"></i>
                                        <span>Valid ID</span>
                                    </li>
                                    <li className="flex items-start">
                                        <i className="fas fa-check-circle text-green-600 mr-3 mt-1"></i>
                                        <span>Cash (some bars get busy)</span>
                                    </li>
                                    <li className="flex items-start">
                                        <i className="fas fa-check-circle text-green-600 mr-3 mt-1"></i>
                                        <span>Gifts! Nice gifts for kids, "naughty" gifts for adults!</span>
                                    </li>
                                    <li className="flex items-start">
                                        <i className="fas fa-check-circle text-green-600 mr-3 mt-1"></i>
                                        <span>Layers, gloves, hand warmers, etc. Santa will be outside!</span>
                                    </li>
                                    <li className="flex items-start">
                                        <i className="fas fa-check-circle text-green-600 mr-3 mt-1"></i>
                                        <span>"Water" bottle</span>
                                    </li>
                                </ul>
                            </div>
                        )}
                    </div>
                </div>
            );

            const MailingListPage = () => (
                <div className="space-y-6">
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold text-red-700 mb-2">
                            <i className="fas fa-scroll mr-2"></i>
                            The Naughty List
                        </h1>
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl p-6">
                        <div className="text-center mb-6">
                            <span className="text-6xl mb-4 block">üéÑ</span>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">
                                Santa's making a list and checking it twice! Stay up to date on Boulder SantaCon.
                            </h2>
                        </div>

                        <form onSubmit={handleSubscribe} className="space-y-4">
                            <div>
                                <label htmlFor="email" className="block text-sm font-semibold text-gray-700 mb-2">
                                    Email Address
                                </label>
                                <input
                                    type="email"
                                    id="email"
                                    name="email"
                                    required
                                    className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-500 text-lg"
                                    placeholder="santa@northpole.com"
                                    autoComplete="email"
                                />
                            </div>

                            <button
                                type="submit"
                                className="w-full bg-red-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-red-700 transition text-lg"
                            >
                                <i className="fas fa-gift mr-2"></i>
                                Subscribe
                            </button>

                            {subscribeStatus && (
                                <div className={`text-center py-2 px-4 rounded-lg ${
                                    subscribeStatus.includes('Thanks') 
                                        ? 'bg-green-100 text-green-700' 
                                        : 'bg-yellow-100 text-yellow-700'
                                }`}>
                                    {subscribeStatus}
                                </div>
                            )}
                        </form>

                        <p className="text-xs text-gray-500 text-center mt-4">
                            We respect your privacy. Unsubscribe at any time.
                        </p>
                    </div>
                </div>
            );

            const AfterPartyPage = React.memo(() => (
                <div className="space-y-6">
                    <div className="text-center mb-8">
                        <img 
                            src="img/santaballheader.jpg" 
                            alt="The Santa Ball After Party!" 
                            className="w-full max-w-2xl mx-auto rounded-lg shadow-2xl"
                        />
                    </div>

                    <div className="glass-effect rounded-lg shadow-xl p-6">
                        <p className="text-gray-700 text-center mb-6">
                            Please join us for the 3rd annual Santa Ball, the official after-party for Boulder SantaCon! If you've come to the Santa Ball either of the last 2 years, then you know how we throw down!
                        </p>
                        
                        <div className="text-center mb-6">
                            <img src="img/santaball.jpg" alt="Santa Ball Party" class="w-[300px] h-[300px] mx-auto rounded-lg shadow-lg object-cover" />
                        </div>

                        <div className="space-y-4 mb-6">
                            <div className="flex items-start">
                                <i className="fas fa-map-marker-alt text-red-600 text-xl mr-4 mt-1"></i>
                                <div>
                                    <div className="font-bold text-gray-800">Location</div>
                                    <div className="text-gray-700">The Riverside</div>
                                </div>
                            </div>

                            <div className="flex items-start">
                                <i className="fas fa-clock text-red-600 text-xl mr-4 mt-1"></i>
                                <div>
                                    <div className="font-bold text-gray-800">Time</div>
                                    <div className="text-gray-700">9:00 PM - 1:00 AM</div>
                                </div>
                            </div>

                            <div className="flex items-start">
                                <i className="fas fa-music text-red-600 text-xl mr-4 mt-1"></i>
                                <div>
                                    <div className="font-bold text-gray-800">Entertainment</div>
                                    <div className="text-gray-700">DJs: Flaming Olive <> Ignyte <> Bounce <> Secret Santa! Photo Booth, Food/Drink/Cookies!</div>
                                </div>
                            </div>

                            <div className="flex items-start">
                                <i className="fas fa-ticket-alt text-red-600 text-xl mr-4 mt-1"></i>
                                <div>
                                    <div className="font-bold text-gray-800">Tickets</div>
                                    <div className="text-gray-700">$20 per ticket</div>
                                </div>
                            </div>
                        </div>

                        <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                            <p className="text-sm text-gray-700">
                                As always, the SantaCon crawl is a FREE event, but the official after-party requires a ticket. We pay the venue, the DJ's, rent gear, etc. Thank you immensely for helping us "Keep Boulder Weird."
                            </p>
                        </div>

                        <a
                            href="https://www.eventbrite.com/e/santa-ball-2025-the-boulder-santacon-official-after-party-tickets-1963688271481"
                            target="_blank"
                            rel="noopener noreferrer"
                            className="block w-full bg-gradient-to-r from-red-600 to-green-600 text-white py-4 px-4 rounded-lg font-bold text-center hover:from-red-700 hover:to-green-700 transition text-lg"
                        >
                            <i className="fas fa-ticket-alt mr-2"></i>
                            Get Tickets
                        </a>
                    </div>
                </div>
            ));

            const MajorAwardPage = () => (
                <div className="space-y-6">
                    <div className="text-center mb-6">
                        <h1 className="text-2xl font-bold text-red-700 mb-4">
                            üèÜ MAJOR AWARD! üèÜ
                        </h1>
                        <p className="text-3xl font-bold text-gray-800 mb-2">FRAGILE</p>
                        <p className="text-xl text-gray-600 mb-6">(Fra-gee-lay... must be Italian!)</p>
                        
                        <div className="mb-6">
                            <img 
                                src="img/leglamp.jpg" 
                                alt="The Major Award - A Leg Lamp"
                                className="mx-auto rounded-lg shadow-2xl"
                                style={{ maxWidth: '350px', width: '100%', height: 'auto' }}
                            />
                        </div>

                        <div className="glass-effect rounded-lg p-6 mb-6">
                            <p className="text-xl font-bold text-gray-800 mb-4">
                                You won it! Mind power, Santa!
                            </p>
                            <p className="text-lg text-gray-700">
                                Nothing could drag you away from this soft glow of electric achievement gleaming in all its glory.
                            </p>
                        </div>

                        <button
                            onClick={() => setActiveTab('quests')}
                            className="w-full bg-gradient-to-r from-red-600 to-green-600 text-white py-4 px-6 rounded-lg font-bold hover:from-red-700 hover:to-green-700 transition text-lg"
                        >
                            Back to Quests
                        </button>
                    </div>
                </div>
            );

            const QuestsPage = () => {
                const now = new Date();
                const currentTime = now.getHours() * 60 + now.getMinutes();
                
                // Check if challenges are unlocked (Nov 28, 2025 at 5:00pm - Black Friday)
                const year = now.getFullYear();
                const month = now.getMonth(); // 0-11 (November is 10)
                const day = now.getDate();
                const challengesUnlockTime = 17 * 60; // 5:00pm in minutes
                
                // Unlock on event day at 5pm OR after event day (stays unlocked)
                const areChallengesUnlocked = (year === 2025 && month === 10 && day === 28 && currentTime >= challengesUnlockTime) || 
                                              (year === 2025 && month === 10 && day > 28) ||
                                              (year > 2025);
                
                // Count completed quests
                const venueQuestCount = Object.values(venueQuests).filter(Boolean).length;
                const challengeCount = Object.values(challenges).filter(Boolean).length;
                const badgeCount = Object.values(badges).filter(Boolean).length;
                
                // Check which venue quests are unlocked
                const getVenueQuestStatus = (quest) => {
                    // After event day (Nov 28, 2025), keep all venue quests unlocked
                    if ((year === 2025 && month === 10 && day > 28) || (year > 2025)) {
                        return 'unlocked';
                    }
                    // During event day (Nov 28, 2025), use time-based unlocking
                    if (year === 2025 && month === 10 && day === 28 && currentTime >= quest.unlockTime) {
                        return 'unlocked';
                    }
                    return 'locked';
                };
                
                // Get locked quests by unlock time
                const lockedQuests = venueQuestData.filter(q => getVenueQuestStatus(q) === 'locked');
                const unlockedQuests = venueQuestData.filter(q => getVenueQuestStatus(q) === 'unlocked');
                
                // Group locked quests by unlock time
                const lockedGroups = lockedQuests.reduce((acc, quest) => {
                    const time = quest.unlockTime;
                    if (!acc[time]) acc[time] = [];
                    acc[time].push(quest);
                    return acc;
                }, {});
                
                const formatTime = (minutes) => {
                    const hours = Math.floor(minutes / 60);
                    const mins = minutes % 60;
                    const period = hours >= 12 ? 'pm' : 'am';
                    const displayHour = hours > 12 ? hours - 12 : hours;
                    return `${displayHour}:${mins.toString().padStart(2, '0')}${period}`;
                };
                
                return (
                    <div className="space-y-6">
                        <div className="text-center mb-6">
                            <h1 className="text-3xl font-bold text-red-700 mb-2">
                                <i className="fas fa-trophy mr-2"></i>
                                Santa's Side Quests
                            </h1>
                            <p className="text-gray-600">
                                Ready to level up your SantaCon? Complete Santa's Side Quests and earn badges!
                            </p>
                        </div>

                        {/* Major Award Card - Only shows when all badges complete */}
                        {badgeCount === 6 && (
                            <div 
                                className="major-award-card rounded-lg shadow-xl p-6 cursor-pointer"
                                onClick={() => setActiveTab('major-award')}
                            >
                                <div className="text-center">
                                    <div className="text-2xl font-bold mb-1">üèÜ MAJOR AWARD üèÜ</div>
                                    <div className="text-2xl font-bold mb-3">UNLOCKED!</div>
                                    <p className="text-gray-800 font-bold text-lg mb-2">
                                        Congratulations! You've completed all 6 badges!
                                    </p>
                                    <p className="text-gray-800 mb-4">
                                        You are a TRUE Boulder SantaCon Legend!
                                    </p>
                                    <div className="inline-block bg-white bg-opacity-30 hover:bg-opacity-50 transition px-6 py-3 rounded-lg font-bold text-gray-800">
                                        View Your Major Award ‚Üí
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Badge Section */}
                        <div className="glass-effect rounded-lg shadow-xl overflow-hidden">
                            <button
                                onClick={() => setBadgeLegendExpanded(!badgeLegendExpanded)}
                                className="w-full p-6 text-left hover:bg-gray-50 transition-colors"
                            >
                                <div className="flex items-center justify-between mb-4">
                                    <h2 className="text-xl font-bold text-gray-800">
                                        üèÜ Your Badges ({badgeCount}/6)
                                    </h2>
                                    <i className={`fas fa-chevron-down text-gray-400 text-xl ${badgeLegendExpanded ? 'rotate-180' : ''}`} style={{transition: 'transform 0.3s'}}></i>
                                </div>
                                
                                <div className="flex justify-center gap-4 mb-2 text-4xl">
                                    <span>{badges.jollyLeader ? 'üéÖüèª' : 'üîí'}</span>
                                    <span>{badges.giftGiver ? 'üéÅ' : 'üîí'}</span>
                                    <span>{badges.paparazzi ? 'üì∏' : 'üîí'}</span>
                                    <span>{badges.marathonSanta ? 'üèÉ' : 'üîí'}</span>
                                    <span>{badges.superSanta ? 'üí™üèª' : 'üîí'}</span>
                                    <span>{badges.boulderLegend ? 'ü´°' : 'üîí'}</span>
                                </div>
                                
                                <p className="text-center text-sm text-gray-600">
                                    Badge details <i className={`fas fa-chevron-down text-xs ${badgeLegendExpanded ? 'rotate-180' : ''}`} style={{transition: 'transform 0.3s'}}></i>
                                </p>
                            </button>
                            
                            {badgeLegendExpanded && (
                                <div className="px-6 pb-6 pt-4 border-t-2 border-gray-200">
                                    <p className="text-gray-700 mb-4">
                                        Unlock badges by completing challenges and side quests throughout the night:
                                    </p>
                                    <div className="space-y-3 text-sm">
                                        <div>
                                            <div className="font-semibold text-gray-800">
                                                üéÖüèª Jolly Leader {badges.jollyLeader && '- ‚úÖ UNLOCKED'}
                                            </div>
                                            <div className="text-gray-600 ml-6">Lead a carol sing-along in public</div>
                                        </div>
                                        <div>
                                            <div className="font-semibold text-gray-800">
                                                üéÅ Gift Giver {badges.giftGiver && '- ‚úÖ UNLOCKED'}
                                            </div>
                                            <div className="text-gray-600 ml-6">Buy a fellow Santa some holiday cheer</div>
                                        </div>
                                        <div>
                                            <div className="font-semibold text-gray-800">
                                                üì∏ Paparazzi {badges.paparazzi && '- ‚úÖ UNLOCKED'}
                                            </div>
                                            <div className="text-gray-600 ml-6">Snap photos at 3+ locations</div>
                                        </div>
                                        <div>
                                            <div className="font-semibold text-gray-800">
                                                üèÉ Marathon Santa {badges.marathonSanta && '- ‚úÖ UNLOCKED'}
                                            </div>
                                            <div className="text-gray-600 ml-6">Complete all 4 official stops</div>
                                        </div>
                                        <div>
                                            <div className="font-semibold text-gray-800">
                                                üí™üèª Super Santa {badges.superSanta && '- ‚úÖ UNLOCKED'}
                                            </div>
                                            <div className="text-gray-600 ml-6">Crush 3+ side quests</div>
                                        </div>
                                        <div>
                                            <div className="font-semibold text-gray-800">
                                                ü´° Boulder Legend {badges.boulderLegend && '- ‚úÖ UNLOCKED'}
                                            </div>
                                            <div className="text-gray-600 ml-6">Veteran of 3+ SantaCons</div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Venue Quests Section */}
                        <div className="glass-effect rounded-lg shadow-xl p-6">
                            <h2 className="text-xl font-bold text-red-700 mb-2">
                                <i className="fas fa-map-marker-alt mr-2"></i>
                                VENUE QUESTS ({venueQuestCount}/5)
                            </h2>
                            <p className="text-sm text-gray-600 mb-4">
                                Are you looking for more adventure? Try these side quests to add more fun to your SantaCon experience! Nearby venues unlock throughout the night, complete them to earn extra badges.
                            </p>
                            
                            {unlockedQuests.length > 0 && (
                                <div className="space-y-3 mb-4">
                                    <div className="text-sm font-bold text-green-700">‚ú® Available Now!</div>
                                    {unlockedQuests.map(quest => (
                                        <div key={quest.id} className="border-2 border-green-500 rounded-lg p-4 bg-green-50">
                                            <div className="flex items-start">
                                                <input
                                                    type="checkbox"
                                                    checked={venueQuests[quest.id]}
                                                    onChange={(e) => setVenueQuests({...venueQuests, [quest.id]: e.target.checked})}
                                                    className="mt-1 mr-3 w-5 h-5"
                                                />
                                                <div className="flex-1">
                                                    <div className="font-bold text-gray-800">{quest.name}</div>
                                                    <div className="text-sm text-gray-700">{quest.quest}</div>
                                                    <div className="text-xs text-gray-600 mt-1">
                                                        üìç {quest.distance}
                                                    </div>
                                                    <div className="text-xs text-gray-600">
                                                        ‚è∞ Available: {formatTime(quest.unlockTime)} - {formatTime(quest.availableUntil)}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                            
                            {Object.keys(lockedGroups).length > 0 && (
                                <div className="space-y-2">
                                    {Object.keys(lockedGroups).sort((a, b) => a - b).map(unlockTime => {
                                        const time = parseInt(unlockTime);
                                        let teaserText = '';
                                        
                                        // 5:00pm unlock (17 * 60 = 1020 minutes)
                                        if (time === 1020) {
                                            teaserText = '3 nearby venues ready to explore‚Äîsnap photos, grab drinks, and refuel!';
                                        }
                                        // 7:00pm unlock (19 * 60 = 1140 minutes)
                                        else if (time === 1140) {
                                            teaserText = '2 drink destinations with tropical vibes await!';
                                        }
                                        
                                        // Show "on Black Friday" if before Nov 28, 2025
                                        const isBeforeEventDay = (year < 2025) || 
                                                                  (year === 2025 && month < 10) || 
                                                                  (year === 2025 && month === 10 && day < 28);
                                        const timeText = isBeforeEventDay 
                                            ? `${formatTime(time)} on Black Friday`
                                            : formatTime(time);
                                        
                                        return (
                                            <div key={unlockTime} className="bg-gray-100 border-2 border-gray-300 rounded-lg p-3">
                                                <div className="text-sm font-bold text-gray-700 mb-1">
                                                    üîí Unlocks at {timeText}
                                                </div>
                                                <div className="text-sm text-gray-600">
                                                    {teaserText}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            )}
                        </div>

                        {/* Challenges Section */}
                        <div className="glass-effect rounded-lg shadow-xl p-6">
                            <h2 className="text-xl font-bold text-red-700 mb-4">
                                <i className="fas fa-star mr-2"></i>
                                CHALLENGES ({challengeCount}/12)
                            </h2>
                            
                            {!areChallengesUnlocked ? (
                                <div className="bg-gray-100 border-2 border-gray-300 rounded-lg p-3">
                                    <div className="text-sm font-bold text-gray-700 mb-1">
                                        üîí Unlocks at 5:00pm{((year < 2025) || (year === 2025 && month < 10) || (year === 2025 && month === 10 && day < 28)) ? ' on Black Friday' : ''}
                                    </div>
                                    <div className="text-sm text-gray-600">
                                        The fun's about to begin! Complete challenges as you crawl through Boulder to earn badges and legendary Santa status!
                                    </div>
                                </div>
                            ) : (
                                <>
                                    <p className="text-sm text-gray-600 mb-4">
                                        Complete these challenges throughout the night to earn badges and show off your Santa spirit!
                                    </p>
                                    <div className="space-y-2">
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.niceOrNaughty}
                                        onChange={(e) => setChallenges({...challenges, niceOrNaughty: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>Ask a stranger if they've been Nice (or Naughty) this year</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.groupPhoto}
                                        onChange={(e) => setChallenges({...challenges, groupPhoto: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>Take a group Santa photo</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.findElf}
                                        onChange={(e) => setChallenges({...challenges, findElf: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>Find someone dressed as an elf and tell them to get back to work</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.singCarol}
                                        onChange={(e) => setChallenges({...challenges, singCarol: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>Sing a carol in public</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.giveGift}
                                        onChange={(e) => setChallenges({...challenges, giveGift: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>Give a naughty (or nice) gift to a stranger</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.compliment5}
                                        onChange={(e) => setChallenges({...challenges, compliment5: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>Compliment 5 strangers</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.buyDrink}
                                        onChange={(e) => setChallenges({...challenges, buyDrink: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>Buy someone a drink</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.congaLine}
                                        onChange={(e) => setChallenges({...challenges, congaLine: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>Dance in a Santa conga line!</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.postSocial}
                                        onChange={(e) => setChallenges({...challenges, postSocial: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>Post a photo to your Insta/TikTok/FB account</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.highFive10}
                                        onChange={(e) => setChallenges({...challenges, highFive10: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>High-five 10 people</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.photoCop}
                                        onChange={(e) => setChallenges({...challenges, photoCop: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>Get a photo with a Boulder cop</span>
                                </label>
                                <label className="flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input
                                        type="checkbox"
                                        checked={challenges.boulderLegend}
                                        onChange={(e) => setChallenges({...challenges, boulderLegend: e.target.checked})}
                                        className="mt-1 mr-3 w-5 h-5"
                                    />
                                    <span>This is my 3rd+ SantaCon!</span>
                                </label>
                            </div>
                                </>
                            )}
                        </div>
                    </div>
                );
            };

            useEffect(() => {
                if (darkMode) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }, [darkMode]);

            return (
                <div className="min-h-screen gradient-bg">
                    <Snowflakes />
                    
                    {/* Dark Mode Toggle - Fixed in top right */}
                    <button
                        onClick={() => setDarkMode(!darkMode)}
                        className="fixed top-6 right-6 z-50 bg-white dark:bg-gray-800 text-gray-800 dark:text-white w-10 h-10 rounded-full shadow-lg flex items-center justify-center hover:scale-110 transition-transform"
                        title={darkMode ? "Switch to Light Mode" : "Switch to Dark Mode"}
                    >
                        <i className={`fas fa-${darkMode ? 'sun' : 'moon'} text-lg`}></i>
                    </button>
                    
                    {/* Main Content */}
                    <div className="max-w-2xl mx-auto px-4 py-6 pb-24">
                        {activeTab === 'home' && <HomePage />}
                        {activeTab === 'carols' && <CarolsPage />}
                        {activeTab === 'quests' && <QuestsPage />}
                        {activeTab === 'about' && <AboutPage />}
                        {activeTab === 'mailing' && <MailingListPage />}
                        {activeTab === 'afterparty' && <AfterPartyPage />}
                        {activeTab === 'major-award' && <MajorAwardPage />}
                    </div>

                    {/* Badge Unlock Popup */}
                    {showingBadgePopup && badgePopupQueue.length > 0 && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
                             style={{animation: 'fadeIn 0.3s ease-in'}}>
                            <div className="bg-white rounded-lg shadow-2xl max-w-md w-full p-8 text-center"
                                 style={{animation: 'scaleIn 0.3s ease-out'}}>
                                <div className="text-6xl mb-4 animate-bounce">
                                    üéâ üéâ üéâ
                                </div>
                                <h2 className="text-2xl font-bold text-red-700 mb-4">
                                    BADGE UNLOCKED!
                                </h2>
                                <div className="text-7xl mb-4">
                                    {badgeMessages[badgePopupQueue[0]].emoji}
                                </div>
                                <h3 className="text-xl font-bold text-gray-800 mb-4">
                                    {badgeMessages[badgePopupQueue[0]].title}
                                </h3>
                                <p className="text-gray-700 mb-6 leading-relaxed">
                                    {badgeMessages[badgePopupQueue[0]].message}
                                </p>
                                <button
                                    onClick={handleBadgePopupClose}
                                    className="bg-red-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-red-700 transition text-lg"
                                >
                                    {badgeMessages[badgePopupQueue[0]].buttonText}
                                </button>
                            </div>
                        </div>
                    )}

                    {/* All Badges Complete Modal */}
                    {showAllBadgesModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4"
                             style={{animation: 'fadeIn 0.3s ease-in'}}>
                            <div className="bg-white rounded-lg shadow-2xl max-w-md w-full p-8 text-center"
                                 style={{animation: 'scaleIn 0.3s ease-out'}}>
                                <div className="text-4xl mb-4">‚ú®‚ú®‚ú®</div>
                                <h2 className="text-3xl font-bold text-gray-800 mb-2">CONGRATULATIONS!</h2>
                                <div className="text-5xl my-6">üèÜ</div>
                                <h3 className="text-xl font-bold text-red-700 mb-2">üèÜ MAJOR AWARD üèÜ</h3>
                                <h3 className="text-xl font-bold text-red-700 mb-4">UNLOCKED!</h3>
                                <p className="text-xl text-gray-700 mb-2">You've completed ALL 6 badges!</p>
                                <p className="text-lg text-gray-600 mb-6">You've earned something... Fra-gee-lay!</p>
                                <button
                                    onClick={() => {
                                        setShowAllBadgesModal(false);
                                        setActiveTab('major-award');
                                    }}
                                    className="w-full bg-gradient-to-r from-red-600 to-green-600 text-white py-4 px-6 rounded-lg font-bold hover:from-red-700 hover:to-green-700 transition text-lg"
                                >
                                    View Your Award ‚Üí
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Bottom Navigation */}
                    <nav className="fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg">
                        <div className="max-w-2xl mx-auto px-4">
                            <div className="flex justify-around py-2">
                                <button
                                    onClick={() => setActiveTab('home')}
                                    className={`nav-button flex flex-col items-center py-2 px-4 rounded-lg ${
                                        activeTab === 'home' ? 'active' : 'text-gray-600'
                                    }`}
                                >
                                    <i className="fas fa-home text-xl mb-1"></i>
                                    <span className="text-xs font-semibold">Home</span>
                                </button>
                                <button
                                    onClick={() => setActiveTab('carols')}
                                    className={`nav-button flex flex-col items-center py-2 px-4 rounded-lg ${
                                        activeTab === 'carols' ? 'active' : 'text-gray-600'
                                    }`}
                                >
                                    <i className="fas fa-music text-xl mb-1"></i>
                                    <span className="text-xs font-semibold">Carols</span>
                                </button>
                                <button
                                    onClick={() => setActiveTab('quests')}
                                    className={`nav-button flex flex-col items-center py-2 px-4 rounded-lg ${
                                        activeTab === 'quests' ? 'active' : 'text-gray-600'
                                    }`}
                                >
                                    <i className="fas fa-trophy text-xl mb-1"></i>
                                    <span className="text-xs font-semibold">Quests</span>
                                </button>
                                <button
                                    onClick={() => setActiveTab('mailing')}
                                    className={`nav-button flex flex-col items-center py-2 px-4 rounded-lg ${
                                        activeTab === 'mailing' ? 'active' : 'text-gray-600'
                                    }`}
                                >
                                    <i className="fas fa-envelope text-xl mb-1"></i>
                                    <span className="text-xs font-semibold">Join List</span>
                                </button>
                                <button
                                    onClick={() => setActiveTab('afterparty')}
                                    className={`nav-button flex flex-col items-center py-2 px-4 rounded-lg ${
                                        activeTab === 'afterparty' ? 'active' : 'text-gray-600'
                                    }`}
                                >
                                    <i className="fas fa-glass-cheers text-xl mb-1"></i>
                                    <span className="text-xs font-semibold">Party</span>
                                </button>
                            </div>
                        </div>
                    </nav>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
